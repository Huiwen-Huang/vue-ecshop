"use strict";(self["webpackChunkvue_ecshop"]=self["webpackChunkvue_ecshop"]||[]).push([[509],{7649:function(t,a,s){var o=s(4373),i=s(5234),e=s(4161);const c=(0,e.A)();a.A=(0,i.nY)("cartState",{state:()=>({carts:[],total:"",finalTotal:""}),actions:{getCart(){const t="https://vue3-course-api.hexschool.io/api/ecshop-api/cart";c.isLoading=!0,o.A.get(t).then((t=>{c.isLoading=!1,console.log("getCart",t),t.data.success&&(this.carts=t.data.data.carts,this.total=t.data.data.total,this.finalTotal=t.data.data.final_total)}))},updateCart(t){const a=`https://vue3-course-api.hexschool.io/api/ecshop-api/cart/${t.id}`,s={product_id:t.product_id,qty:t.qty};c.isLoading=!0,c.cartLoadingItem=t.id,o.A.put(a,{data:s}).then((t=>{console.log("updateCart",t),c.isLoading=!1,c.cartLoadingItem="",this.getCart()}))},delProduct(t){const a=`https://vue3-course-api.hexschool.io/api/ecshop-api/cart/${t.id}`;this.isLoading=!0,o.A.delete(a).then((t=>{this.isLoading=!1,console.log("removeCartItem",t),this.getCart()}))}}})},3864:function(t,a,s){var o=s(4373),i=s(5234),e=s(4161),c=s(7649);const d=(0,e.A)(),r=(0,c.A)();a.A=(0,i.nY)("productState",{state:()=>({products:[],categories:{},pagination:{}}),getters:{},actions:{getAllProducts(){const t="https://vue3-course-api.hexschool.io/api/ecshop-api/products/all";d.isLoading=!0,o.A.get(t).then((t=>{d.isLoading=!1,console.log("getAllProducts",t.data),this.products=t.data.products;const a=this.products.map((t=>t.category)),s=a.filter(((t,s)=>a.indexOf(t)===s));this.categories=s}))},getProducts(t=1){const a=`https://vue3-course-api.hexschool.io/api/ecshop-api/products?page=${t}`;d.isLoading=!0,o.A.get(a).then((t=>{d.isLoading=!1,console.log("getProducts",t.data),this.products=t.data.products,this.pagination=t.data.pagination;const a=this.products.map((t=>t.category)),s=a.filter(((t,s)=>a.indexOf(t)===s));this.categories=s}))},addCart(t){const a="https://vue3-course-api.hexschool.io/api/ecshop-api/cart";d.cartLoadingItem=t;const s={product_id:t,qty:1};o.A.post(a,{data:s}).then((t=>{d.cartLoadingItem="",console.log("addCart",t),t.data.success&&r.getCart()}))}}})},4161:function(t,a,s){var o=s(5234);a.A=(0,o.nY)("statusState",{state:()=>({isLoading:!1,cartLoadingItem:""})})},3509:function(t,a,s){s.r(a),s.d(a,{default:function(){return j}});var o=s(6768),i=s(4232),e=s(5130);const c={class:"container mt-5 pt-5"},d={"aria-label":"breadcrumb",class:"mb-4"},r={class:"breadcrumb mb-4"},n={class:"breadcrumb-item"},l={class:"breadcrumb-item","aria-current":"page"},u={class:"breadcrumb-item active fw-bold","aria-current":"page"},p={class:"row justify-content-center"},h={class:"col-md-5 col-11 mb-4",style:{"max-width":"500px"}},g=["src"],m={class:"col-md-4 col-11"},L={class:"mb-4"},b={class:"mb-4"},v=(0,o.Lk)("hr",null,null,-1),k=(0,o.Lk)("br",null,null,-1),f={class:"fs-5 mb-5"},C={class:"fs-6 mb-0 float-end"},y={class:"input-group mb-3"},A=(0,o.Lk)("span",{class:"input-group-text",id:"basic-addon2"},"份",-1),_=["disabled"],x={key:0,class:"spinner-border spinner-border-sm text-warning",role:"status"},I=(0,o.Lk)("span",{class:"visually-hidden"},"Loading...",-1),$=[I],w=(0,o.Lk)("i",{class:"bi bi-cart4"},null,-1);function P(t,a,s,I,P,q){const S=(0,o.g2)("LoadingOverlay"),T=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(S,{active:P.isLoading},null,8,["active"]),(0,o.Lk)("div",c,[(0,o.Lk)("nav",d,[(0,o.Lk)("ol",r,[(0,o.Lk)("li",n,[(0,o.bF)(T,{class:"link-secondary",to:"/shop/products"},{default:(0,o.k6)((()=>[(0,o.eW)("全部商品")])),_:1})]),(0,o.Lk)("li",l,(0,i.v_)(P.product.category),1),(0,o.Lk)("li",u,(0,i.v_)(P.product.title),1)])]),(0,o.Lk)("div",p,[(0,o.Lk)("div",h,[(0,o.Lk)("img",{src:P.product.imageUrl,alt:"productImg",style:{width:"100%",height:"100%"}},null,8,g)]),(0,o.Lk)("div",m,[(0,o.Lk)("h2",L,(0,i.v_)(P.product.title),1),(0,o.Lk)("p",b,(0,i.v_)(P.product.description),1),v,k,(0,o.Lk)("p",f,[(0,o.Lk)("strong",null,"NT$"+(0,i.v_)(P.product.price),1),(0,o.Lk)("span",C,[(0,o.Lk)("del",null,"NT$"+(0,i.v_)(P.product.origin_price),1)])]),(0,o.Lk)("div",y,[(0,o.bo)((0,o.Lk)("input",{type:"number",class:"form-control",placeholder:"1","onUpdate:modelValue":a[0]||(a[0]=t=>P.product.qty=t),min:"1","aria-describedby":"basic-addon2"},null,512),[[e.Jo,P.product.qty,void 0,{number:!0}]]),A]),(0,o.Lk)("button",{type:"button",class:"btn btn-outline-warning w-100",onClick:a[1]||(a[1]=t=>q.addCart(P.product.id)),disabled:this.status.loadingItem===P.product.id},[this.status.loadingItem===P.product.id?((0,o.uX)(),(0,o.CE)("div",x,$)):(0,o.Q3)("",!0),w,(0,o.eW)(" 加入購物車 ")],8,_)])])])],64)}var q=s(7649),S=s(3864),T=s(5234),F={data(){return{product:{},isLoading:!1,id:"",status:{loadingItem:""}}},computed:{...(0,T.aH)(S.A,["products"])},inject:["emitter"],methods:{...(0,T.i0)(q.A,["getCart"]),getProduct(t){const a=`https://vue3-course-api.hexschool.io/api/ecshop-api/product/${t}`;this.isLoading=!0,this.$http.get(a).then((t=>{this.product=t.data.product,this.isLoading=!1,console.log(t)}))},addCart(t){const a="https://vue3-course-api.hexschool.io/api/ecshop-api/cart";this.status.loadingItem=t;const s={product_id:t,qty:1};this.$http.post(a,{data:s}).then((t=>{this.status.loadingItem="",this.$httpMsgState(t,"加入購物車"),console.log(t.data),this.getCart()}))}},created(){this.id=this.$route.params.productId,this.getProduct(this.id),this.getCart()}},O=s(1241);const Y=(0,O.A)(F,[["render",P]]);var j=Y}}]);
//# sourceMappingURL=509.d619da1c.js.map