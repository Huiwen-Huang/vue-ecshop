{"version":3,"file":"js/85.02083eac.js","mappings":"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","sources":["webpack://vue-ecshop/./src/stores/productStore.js","webpack://vue-ecshop/./src/components/PaginationCard.vue","webpack://vue-ecshop/./src/components/PaginationCard.vue?24c6","webpack://vue-ecshop/./src/views/ShopProductsList.vue","webpack://vue-ecshop/./src/views/ShopProductsList.vue?6b07"],"sourcesContent":["import axios from 'axios'\nimport { defineStore } from 'pinia'\nimport statusStore from './statusStore'\nimport cartStore from './cartStore'\n\nconst status = statusStore()\nconst carts = cartStore()\n\nexport default defineStore('productState', {\n  state: () => {\n    return {\n      products: [],\n      pagination: {}\n    }\n  },\n  getters: {\n    // 商品以價格排序\n    sortProducts: (state) =>\n      state.products.sort(\n        (a, b) => a.price - b.price\n      )\n  },\n  actions: {\n    // 取得產品列表\n    getProducts (page = 1) {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/?page=${page}`\n      status.isLoading = true\n      axios.get(api)\n        .then((res) => {\n          this.products = res.data.products\n          this.pagination = res.data.pagination\n          status.isLoading = false\n          console.log('getProducts', res.data)\n        })\n    },\n    // 加入購物車\n    addCart (id) {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\n      status.cartLoadingItem = id\n      // 需要帶入參數\n      const cart = {\n        product_id: id,\n        qty: 1\n      }\n      axios.post(api, { data: cart }) // 帶入參數的方式要留意\n        .then((res) => {\n          status.cartLoadingItem = ''\n          // this.$httpMsgState(res, '加入購物車')\n          console.log('addCart', res)\n          if (res.data.success) {\n            carts.getCart()\n          }\n        })\n    }\n  }\n})\n","<template>\n<div class=\"d-flex justify-content-center\">\n  <nav aria-label=\"Page navigation example\">\n    <ul class=\"pagination\">\n      <li class=\"page-item text-warning\" :class=\"{ 'disabled': pages.has_pre === false}\">\n        <a class=\"page-link\" href=\"#\" aria-label=\"Previous\" @click.prevent=\"updatePage(pages.current_page-1)\">\n          <span aria-hidden=\"true\">&laquo;</span>\n        </a>\n      </li>\n      <li class=\"page-item\" v-for=\"page in pages.total_pages\" :key=\"page\" :class=\"{ 'active': page === pages.current_page}\">\n        <a class=\"page-link\" href=\"#\" @click.prevent=\"updatePage(page)\">{{ page }}</a></li>\n      <li class=\"page-item\" :class=\"{ 'disabled': pages.has_next === false}\">\n        <a class=\"page-link\" href=\"#\" aria-label=\"Next\" @click.prevent=\"updatePage(pages.current_page+1)\">\n          <span aria-hidden=\"true\">&raquo;</span>\n        </a>\n      </li>\n    </ul>\n  </nav>\n</div>\n</template>\n\n<script>\nexport default {\n  props: ['pages'],\n  methods: {\n    updatePage (page) {\n      this.$emit('emit-pages', page)\n    }\n  }\n}\n</script>\n","import { render } from \"./PaginationCard.vue?vue&type=template&id=30728a4c\"\nimport script from \"./PaginationCard.vue?vue&type=script&lang=js\"\nexport * from \"./PaginationCard.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <ShopNavbar></ShopNavbar>\n  <LoadingOverlay :active=\"isLoading\"></LoadingOverlay>\n  <div class=\"container\">\n    <div class=\"row mt-4\">\n      <!-- 產品卡片 -->\n      <div class=\"col d-flex flex-wrap justify-content-center\">\n        <template v-for=\"item in sortProducts\" :key=\"item.id\">\n          <div class=\"card mx-4 mb-4 shadow rounded\" style=\"width: 18rem;\">\n          <div style=\"height: 200px; background-size: cover; background-position: top\"\n                  :style=\"{backgroundImage: `url(${item.imageUrl})`}\"></div>\n          <div class=\"card-body\">\n            <h5 class=\"card-title\">{{ item.title }}</h5>\n            <p class=\"card-text\">NT$ {{ item.price }}</p>\n            <div class=\"d-flex justify-content-center\">\n              <button type=\"button\" class=\"btn btn-outline-secondary me-2\" @click=\"getProduct(item.id)\">查看更多</button>\n              <button class=\"btn btn-outline-warning\"\n                      :disabled=\"cartLoadingItem === item.id\"\n                      @click=\"addCart(item.id)\">\n                <div v-if=\"cartLoadingItem === item.id\" class=\"spinner-border spinner-border-sm\" role=\"status\">\n                  <span class=\"visually-hidden\">Loading...</span>\n                </div>\n                <i class=\"bi bi-cart4\"></i> 加入購物車\n              </button>\n            </div>\n          </div>\n          </div>\n        </template>\n      </div>\n    </div>\n    <!-- 頁籤 -->\n    <PaginationCard :pages=\"pagination\" @emit-pages=\"getProducts\"></PaginationCard>\n  </div>\n</template>\n\n<script>\nimport ShopNavbar from '@/components/ShopNavbar.vue'\nimport PaginationCard from '@/components/PaginationCard.vue'\nimport productStore from '@/stores/productStore'\nimport statusStore from '@/stores/statusStore'\nimport cartStore from '@/stores/cartStore'\nimport { mapState, mapActions } from 'pinia'\n\nexport default {\n  components: {\n    PaginationCard,\n    ShopNavbar\n  },\n  inject: ['emitter'],\n  computed: {\n    ...mapState(productStore, ['sortProducts', 'pagination']),\n    ...mapState(statusStore, ['isLoading', 'cartLoadingItem']),\n    ...mapState(cartStore, ['carts'])\n  },\n  methods: {\n    // 取得產品列表、加入購物車\n    ...mapActions(productStore, ['getProducts']),\n    // 取得購物車數量\n    ...mapActions(cartStore, ['getCart']),\n    // 進入單一商品介紹頁\n    getProduct (id) {\n      this.$router.push(`/product/${id}`)\n    },\n    // 加入購物車\n    ...mapActions(productStore, ['addCart'])\n  },\n  created () {\n    this.getProducts()\n    this.getCart()\n  }\n}\n</script>\n","import { render } from \"./ShopProductsList.vue?vue&type=template&id=ae4c5f28\"\nimport script from \"./ShopProductsList.vue?vue&type=script&lang=js\"\nexport * from \"./ShopProductsList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["status","statusStore","carts","cartStore","defineStore","state","products","pagination","getters","sortProducts","sort","a","b","price","actions","getProducts","page","api","isLoading","axios","get","then","res","this","data","console","log","addCart","id","cartLoadingItem","cart","product_id","qty","post","success","getCart","class","_createElementVNode","_hoisted_4","_hoisted_7","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_normalizeClass","$props","pages","has_pre","href","onClick","_cache","_withModifiers","$event","$options","updatePage","current_page","_hoisted_5","_Fragment","_renderList","total_pages","key","_hoisted_6","has_next","_hoisted_8","props","methods","$emit","__exports__","render","role","_hoisted_11","_createVNode","_component_ShopNavbar","_component_LoadingOverlay","active","_ctx","item","style","_normalizeStyle","backgroundImage","imageUrl","_toDisplayString","title","type","getProduct","disabled","_hoisted_10","_hoisted_12","_createCommentVNode","_hoisted_13","_createTextVNode","_hoisted_9","_component_PaginationCard","onEmitPages","components","PaginationCard","ShopNavbar","inject","computed","mapState","productStore","mapActions","$router","push","created"],"sourceRoot":""}