"use strict";(self["webpackChunkvue_ecshop"]=self["webpackChunkvue_ecshop"]||[]).push([[526],{4324:function(e,t,a){a.d(t,{A:function(){return g}});var s=a(6768),l=a(4232),o=a(5130);const r={class:"d-flex justify-content-center"},d={"aria-label":"Page navigation example"},i={class:"pagination"},n=(0,s.Lk)("span",{"aria-hidden":"true"},"«",-1),c=[n],m=["onClick"],p=(0,s.Lk)("span",{"aria-hidden":"true"},"»",-1),u=[p];function h(e,t,a,n,p,h){return(0,s.uX)(),(0,s.CE)("div",r,[(0,s.Lk)("nav",d,[(0,s.Lk)("ul",i,[(0,s.Lk)("li",{class:(0,l.C4)(["page-item text-warning",{disabled:!1===a.pages.has_pre}])},[(0,s.Lk)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=(0,o.D$)((e=>h.updatePage(a.pages.current_page-1)),["prevent"]))},c)],2),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.pages.total_pages,(e=>((0,s.uX)(),(0,s.CE)("li",{class:(0,l.C4)(["page-item",{active:e===a.pages.current_page}]),key:e},[(0,s.Lk)("a",{class:"page-link",href:"#",onClick:(0,o.D$)((t=>h.updatePage(e)),["prevent"])},(0,l.v_)(e),9,m)],2)))),128)),(0,s.Lk)("li",{class:(0,l.C4)(["page-item",{disabled:!1===a.pages.has_next}])},[(0,s.Lk)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[1]||(t[1]=(0,o.D$)((e=>h.updatePage(a.pages.current_page+1)),["prevent"]))},u)],2)])])])}var k={props:["pages"],methods:{updatePage(e){this.$emit("emit-pages",e)}}},b=a(1241);const L=(0,b.A)(k,[["render",h]]);var g=L},5526:function(e,t,a){a.r(t),a.d(t,{default:function(){return me}});var s=a(6768),l=a(4232),o=a(5130);const r={class:"container"},d={class:"table table-striped table-hover mt-4"},i=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",{class:"text-center",width:"120"},"訂單日期"),(0,s.Lk)("th",{class:"text-center",width:"200"},"訂單編號"),(0,s.Lk)("th",{class:"text-center",width:"120"},"訂單金額"),(0,s.Lk)("th",{class:"text-center",width:"120"},"付款狀態"),(0,s.Lk)("th",{class:"text-center",width:"200"},"訂購人"),(0,s.Lk)("th",{class:"text-center",width:"120"},"編輯")])],-1),n={class:"text-center"},c={class:"text-center"},m={class:"text-center"},p={key:0,class:"text-center text-success"},u={key:1,class:"text-center"},h={class:"text-center"},k={class:"text-center"},b={class:"btn-group"},L=["onClick"],g=["onClick"];function f(e,t,a,f,v,x){const y=(0,s.g2)("LoadingOverlay"),_=(0,s.g2)("PaginationCard"),O=(0,s.g2)("OrderModal"),C=(0,s.g2)("OrderDelModal");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(y,{active:v.isLoading},null,8,["active"]),(0,s.Lk)("div",r,[(0,s.Lk)("table",d,[i,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(v.orders,(t=>((0,s.uX)(),(0,s.CE)("tr",{key:t.id},[(0,s.Lk)("td",n,(0,l.v_)(e.$filters.date(t.create_at)),1),(0,s.Lk)("td",c,(0,l.v_)(t.id),1),(0,s.Lk)("td",m,"NT$ "+(0,l.v_)(e.$filters.currency(t.total)),1),t.is_paid?((0,s.uX)(),(0,s.CE)("td",p,"已付款")):((0,s.uX)(),(0,s.CE)("td",u,"未付款")),(0,s.Lk)("td",h,(0,l.v_)(t.user.email),1),(0,s.Lk)("td",k,[(0,s.Lk)("div",b,[(0,s.Lk)("button",{class:"btn btn-outline-primary btn-sm",onClick:(0,o.D$)((e=>x.openModal(t)),["prevent"])},"編輯",8,L),(0,s.Lk)("button",{class:"btn btn-outline-danger btn-sm",onClick:(0,o.D$)((e=>x.openDelModal(t)),["prevent"])},"刪除",8,g)])])])))),128))])])]),(0,s.bF)(_,{pages:v.pagination,onEmitPages:x.getOrders},null,8,["pages","onEmitPages"]),(0,s.bF)(O,{ref:"orderModal",order:v.tempOrder,onEmitOrder:x.updateOrder},null,8,["order","onEmitOrder"]),(0,s.bF)(C,{ref:"delModal",item:v.tempOrder,onDelItem:x.delOrder},null,8,["item","onDelItem"])],64)}var v=a(4324);const x={class:"modal fade",id:"couponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},y={class:"modal-dialog",role:"document"},_={class:"modal-content"},O=(0,s.Lk)("div",{class:"modal-header"},[(0,s.Lk)("h5",{class:"modal-title",id:"exampleModalLabel"},"編輯訂購資訊"),(0,s.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),C={class:"modal-body"},M={class:"mb-3"},$=(0,s.Lk)("label",{for:"title"},"訂單日期",-1),w={class:"mb-3"},E=(0,s.Lk)("label",{for:"name"},"訂購人姓名",-1),D={class:"mb-3"},P=(0,s.Lk)("label",{for:"tel"},"訂購人電話",-1),X={class:"mb-3"},U=(0,s.Lk)("label",{for:"email"},"訂購人信箱",-1),V={class:"mb-3"},A=(0,s.Lk)("label",{for:"address"},"訂購人地址",-1),J={class:"mb-3"},F=(0,s.Lk)("label",{for:"address"},"訂單金額",-1),I={class:"mb-3"},K=(0,s.Lk)("label",{for:"payment_method"},"付款方式",-1),N={class:"form-check"},S=(0,s.Lk)("label",{class:"form-check-label",for:"is_paid"}," 是否付款 ",-1),T={class:"mb-3"},W=(0,s.Lk)("label",{for:"message"},"訂單備註",-1),j={class:"modal-footer"},H=(0,s.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1);function q(e,t,a,l,r,d){return(0,s.uX)(),(0,s.CE)("div",x,[(0,s.Lk)("div",y,[(0,s.Lk)("div",_,[O,(0,s.Lk)("div",C,[(0,s.Lk)("div",M,[$,(0,s.bo)((0,s.Lk)("input",{type:"date",class:"form-control",id:"title","onUpdate:modelValue":t[0]||(t[0]=e=>r.create_at=e)},null,512),[[o.Jo,r.create_at]])]),(0,s.Lk)("div",w,[E,(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>r.form.user.name=e)},null,512),[[o.Jo,r.form.user.name]])]),(0,s.Lk)("div",D,[P,(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",id:"tel","onUpdate:modelValue":t[2]||(t[2]=e=>r.form.user.tel=e)},null,512),[[o.Jo,r.form.user.tel]])]),(0,s.Lk)("div",X,[U,(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",id:"email","onUpdate:modelValue":t[3]||(t[3]=e=>r.form.user.email=e)},null,512),[[o.Jo,r.form.user.email]])]),(0,s.Lk)("div",V,[A,(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",id:"address","onUpdate:modelValue":t[4]||(t[4]=e=>r.form.user.address=e)},null,512),[[o.Jo,r.form.user.address]])]),(0,s.Lk)("div",J,[F,(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",id:"address","onUpdate:modelValue":t[5]||(t[5]=e=>r.form.total=e)},null,512),[[o.Jo,r.form.total,void 0,{number:!0}]])]),(0,s.Lk)("div",I,[K,(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",id:"payment_method","onUpdate:modelValue":t[6]||(t[6]=e=>r.form.payment_method=e)},null,512),[[o.Jo,r.form.payment_method]])]),(0,s.Lk)("div",N,[(0,s.bo)((0,s.Lk)("input",{class:"form-check-input",type:"checkbox",id:"is_paid","true-value":!0,"false-value":!1,"onUpdate:modelValue":t[7]||(t[7]=e=>r.form.is_paid=e)},null,512),[[o.lH,r.form.is_paid]]),S]),(0,s.Lk)("div",T,[W,(0,s.bo)((0,s.Lk)("input",{type:"textarea",class:"form-control",id:"message","onUpdate:modelValue":t[8]||(t[8]=e=>r.form.message=e)},null,512),[[o.Jo,r.form.message]])])]),(0,s.Lk)("div",j,[H,(0,s.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[9]||(t[9]=t=>e.$emit("emit-order",r.form))},"更新")])])])],512)}var z=a(957),B={props:{order:{}},data(){return{create_at:"",form:{id:"",create_at:"",is_paid:!1,message:"",payment_method:"",products:[],total:"",user:{}}}},watch:{order(){this.form=this.order;const e=new Date(1e3*this.form.create_at).toISOString().split("T");[this.create_at]=e},create_at(){this.form.create_at=Math.floor(new Date(this.create_at)/1e3)}},mixins:[z.A]},G=a(1241);const Q=(0,G.A)(B,[["render",q]]);var R=Q;const Y={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},Z={class:"modal-dialog"},ee={class:"modal-content"},te=(0,s.Lk)("div",{class:"modal-header bg-danger"},[(0,s.Lk)("h5",{class:"modal-title text-light",id:"exampleModalLabel"},"移除訂單"),(0,s.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ae={class:"modal-body"},se={class:"modal-footer"},le=(0,s.Lk)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消",-1);function oe(e,t,a,o,r,d){return(0,s.uX)(),(0,s.CE)("div",Y,[(0,s.Lk)("div",Z,[(0,s.Lk)("div",ee,[te,(0,s.Lk)("div",ae,[(0,s.eW)(" 是否確定移除訂單 "),(0,s.Lk)("strong",null,(0,l.v_)(a.item?.id),1),(0,s.eW)(" ？移除後將無法復原！ ")]),(0,s.Lk)("div",se,[le,(0,s.Lk)("button",{type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=t=>e.$emit("del-item",r.tempOrder))},"確認刪除")])])])],512)}var re={props:{item:{}},data(){return{modal:"",tempOrder:{}}},watch:{item(){this.tempOrder=this.item}},mixins:[z.A]};const de=(0,G.A)(re,[["render",oe]]);var ie=de,ne={data(){return{orders:{},tempOrder:{id:""},pagination:{},isLoading:!1}},components:{PaginationCard:v.A,OrderModal:R,OrderDelModal:ie},methods:{getOrders(e=1){const t=`https://vue3-course-api.hexschool.io/api/ecshop-api/admin/orders?page=${e}`;this.isLoading=!0,this.$http.get(t).then((e=>{this.isLoading=!1,console.log("getOrder",e),e.data.success&&(this.orders=e.data.orders,this.pagination=e.data.pagination)}))},openModal(e){this.tempOrder={...e},console.log("editOderModal",this.tempOrder),this.$refs.orderModal.showModal()},updateOrder(e){const t=`https://vue3-course-api.hexschool.io/api/ecshop-api/admin/order/${e.id}`;this.isLoading=!0,this.$http.put(t,{data:e}).then((e=>{this.isLoading=!1,this.$refs.orderModal.hideModal(),console.log("updateOrder",e),e.data.success&&this.getOrders()}))},openDelModal(e){this.tempOrder={...e},this.$refs.delModal.showModal()},delOrder(e){const t=`https://vue3-course-api.hexschool.io/api/ecshop-api/admin/order/${e.id}`;this.isLoading=!0,this.$http.delete(t).then((e=>{this.isLoading=!1,this.$refs.delModal.hideModal(),console.log("delOrder",e),e.data.success&&this.getOrders()}))}},created(){this.getOrders()}};const ce=(0,G.A)(ne,[["render",f]]);var me=ce}}]);
//# sourceMappingURL=526.e2f57975.js.map