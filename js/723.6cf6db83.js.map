{"version":3,"file":"js/723.6cf6db83.js","mappings":"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","sources":["webpack://vue-ecshop/./src/stores/statusStore.js","webpack://vue-ecshop/./src/components/PaginationCard.vue","webpack://vue-ecshop/./src/components/PaginationCard.vue?24c6","webpack://vue-ecshop/./src/views/ShopProductsList.vue","webpack://vue-ecshop/./src/stores/productStore.js","webpack://vue-ecshop/./src/views/ShopProductsList.vue?6b07"],"sourcesContent":["import { defineStore } from 'pinia'\n\nexport default defineStore('statusState', {\n  state: () => {\n    return {\n      isLoading: false,\n      cartLoadingItem: ''\n    }\n  }\n})\n","<template>\n<div class=\"d-flex justify-content-center\">\n  <nav aria-label=\"Page navigation example\">\n    <ul class=\"pagination\">\n      <li class=\"page-item text-warning\" :class=\"{ 'disabled': pages.has_pre === false}\">\n        <a class=\"page-link\" href=\"#\" aria-label=\"Previous\" @click.prevent=\"updatePage(pages.current_page-1)\">\n          <span aria-hidden=\"true\">&laquo;</span>\n        </a>\n      </li>\n      <li class=\"page-item\" v-for=\"page in pages.total_pages\" :key=\"page\" :class=\"{ 'active': page === pages.current_page}\">\n        <a class=\"page-link\" href=\"#\" @click.prevent=\"updatePage(page)\">{{ page }}</a></li>\n      <li class=\"page-item\" :class=\"{ 'disabled': pages.has_next === false}\">\n        <a class=\"page-link\" href=\"#\" aria-label=\"Next\" @click.prevent=\"updatePage(pages.current_page+1)\">\n          <span aria-hidden=\"true\">&raquo;</span>\n        </a>\n      </li>\n    </ul>\n  </nav>\n</div>\n</template>\n\n<script>\nexport default {\n  props: ['pages'],\n  methods: {\n    updatePage (page) {\n      this.$emit('emit-pages', page)\n    }\n  }\n}\n</script>\n","import { render } from \"./PaginationCard.vue?vue&type=template&id=30728a4c\"\nimport script from \"./PaginationCard.vue?vue&type=script&lang=js\"\nexport * from \"./PaginationCard.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <LoadingOverlay :active=\"isLoading\"></LoadingOverlay>\n  <div class=\"container\">\n    <div class=\"row mt-4\">\n      <!-- 產品列表 -->\n      <!-- <div class=\"col\">\n        <table class=\"table align-middle\">\n          <thead>\n            <tr>\n              <th class=\"text-center\">圖片</th>\n              <th class=\"text-center\" style=\"width:30%\">商品名稱</th>\n              <th class=\"text-center\" style=\"width:20%\">價格</th>\n              <th style=\"width:30%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"item in products\" :key=\"item.id\">\n              <td class=\"text-center\" style=\"width:200px\">\n                <div style=\"height: 200px; background-size: cover; background-position: top\"\n                  :style=\"{backgroundImage: `url(${item.imageUrl})`}\"></div>\n              </td>\n              <td class=\"text-center\">{{ item.title }}</td>\n              <td class=\"text-center\">{{ item.price }}</td>\n              <td class=\"text-center\">\n                <button type=\"button\" class=\"btn btn-outline-secondary\" @click=\"getProduct(item.id)\">查看更多</button>\n                <button class=\"btn btn-outline-danger\"\n                        :disabled=\"this.status.loadingItem === item.id\"\n                        @click=\"addCart(item.id)\">\n                  <div v-if=\"this.status.loadingItem === item.id\" class=\"spinner-border spinner-border-sm text-danger\" role=\"status\">\n                    <span class=\"visually-hidden\">Loading...</span>\n                  </div>\n                  <i class=\"bi bi-cart4\"></i> 加入購物車\n                </button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div> -->\n      <!-- 產品卡片 -->\n      <div class=\"col d-flex flex-wrap justify-content-center\">\n        <template v-for=\"item in sortProducts\" :key=\"item.id\">\n          <div class=\"card mx-4 mb-4 shadow rounded\" style=\"width: 18rem;\">\n          <div style=\"height: 200px; background-size: cover; background-position: top\"\n                  :style=\"{backgroundImage: `url(${item.imageUrl})`}\"></div>\n          <div class=\"card-body\">\n            <h5 class=\"card-title\">{{ item.title }}</h5>\n            <p class=\"card-text\">NT$ {{ item.price }}</p>\n            <div class=\"d-flex justify-content-center\">\n              <button type=\"button\" class=\"btn btn-outline-secondary me-2\" @click=\"getProduct(item.id)\">查看更多</button>\n              <button class=\"btn btn-outline-warning\"\n                      :disabled=\"this.status.loadingItem === item.id\"\n                      @click=\"addCart(item.id)\">\n                <div v-if=\"this.status.loadingItem === item.id\" class=\"spinner-border spinner-border-sm\" role=\"status\">\n                  <span class=\"visually-hidden\">Loading...</span>\n                </div>\n                <i class=\"bi bi-cart4\"></i> 加入購物車\n              </button>\n            </div>\n          </div>\n          </div>\n        </template>\n      </div>\n    </div>\n    <!-- 頁籤 -->\n    <PaginationCard :pages=\"pagination\" @emit-pages=\"getProducts\"></PaginationCard>\n  </div>\n</template>\n\n<script>\nimport PaginationCard from '@/components/PaginationCard.vue'\nimport productStore from '@/stores/productStore'\nimport statusStore from '@/stores/statusStore'\nimport { mapState, mapActions } from 'pinia'\n\nexport default {\n  data () {\n    return {\n      status: {\n        loadingItem: '' // 對應品項 ID\n      }\n    }\n  },\n  components: {\n    PaginationCard\n  },\n  inject: ['emitter'],\n  computed: {\n    ...mapState(productStore, ['sortProducts', 'pagination']),\n    ...mapState(statusStore, ['isLoading'])\n  },\n  methods: {\n    // 取得產品列表(透過 pinia)\n    ...mapActions(productStore, ['getProducts']),\n    // 進入單一商品介紹頁\n    getProduct (id) {\n      this.$router.push(`/shop/product/${id}`)\n    },\n    addCart (id) {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\n      this.status.loadingItem = id\n      // 需要帶入參數\n      const cart = {\n        product_id: id,\n        qty: 1\n      }\n      this.$http.post(api, { data: cart }) // 帶入參數的方式要留意\n        .then((res) => {\n          this.status.loadingItem = ''\n          this.$httpMsgState(res, '加入購物車')\n          console.log(res)\n        })\n    }\n  },\n  created () {\n    this.getProducts()\n  }\n}\n</script>\n","import axios from 'axios'\nimport { defineStore } from 'pinia'\nimport statusStore from './statusStore'\n\nconst status = statusStore()\n\nexport default defineStore('productState', {\n  state: () => {\n    return {\n      products: [],\n      pagination: {}\n    }\n  },\n  getters: {\n    // 商品以價格排序\n    sortProducts: (state) =>\n      state.products.sort(\n        (a, b) => a.price - b.price\n      )\n  },\n  actions: {\n    getProducts (page = 1) {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/?page=${page}`\n      status.isLoading = true\n      axios.get(api)\n        .then((res) => {\n          this.products = res.data.products\n          this.pagination = res.data.pagination\n          status.isLoading = false\n          console.log(res.data)\n        })\n    }\n  }\n})\n","import { render } from \"./ShopProductsList.vue?vue&type=template&id=70c5bbce\"\nimport script from \"./ShopProductsList.vue?vue&type=script&lang=js\"\nexport * from \"./ShopProductsList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["defineStore","state","isLoading","cartLoadingItem","class","_createElementVNode","_hoisted_4","_hoisted_7","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_normalizeClass","$props","pages","has_pre","href","onClick","_cache","_withModifiers","$event","$options","updatePage","current_page","_hoisted_5","_Fragment","_renderList","total_pages","page","key","_hoisted_6","has_next","_hoisted_8","props","methods","this","$emit","__exports__","render","role","_hoisted_11","_createVNode","_component_LoadingOverlay","active","_ctx","sortProducts","item","id","style","_normalizeStyle","backgroundImage","imageUrl","_toDisplayString","title","price","type","getProduct","disabled","status","loadingItem","addCart","_hoisted_10","_hoisted_12","_createCommentVNode","_hoisted_13","_createTextVNode","_hoisted_9","_component_PaginationCard","pagination","onEmitPages","getProducts","statusStore","products","getters","sort","a","b","actions","api","axios","get","then","res","data","console","log","components","PaginationCard","inject","computed","mapState","productStore","mapActions","$router","push","cart","product_id","qty","$http","post","$httpMsgState","created"],"sourceRoot":""}