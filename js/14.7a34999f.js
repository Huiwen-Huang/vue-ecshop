"use strict";(self["webpackChunkvue_ecshop"]=self["webpackChunkvue_ecshop"]||[]).push([[14],{6014:function(e,s,a){a.r(s),a.d(s,{default:function(){return oe}});var l=a(6768),t=a(4232),o=a(5130);const r={class:"container"},i={class:"row mb-4"},n={class:"col-md-8 col-10 mx-auto"},d={class:"position-relative m-4"},c=(0,l.Lk)("div",{class:"progress",style:{height:"2px"}},[(0,l.Lk)("div",{class:"progress-bar",role:"progressbar",style:{width:"100%","--bs-progress-bar-bg":"#D6EADF"},"aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100"})],-1),b=(0,l.Lk)("button",{type:"button",class:"position-absolute top-0 start-0 translate-middle btn btn-sm rounded-pill",style:{width:"2rem",height:"2rem","--bs-btn-bg":"#D6EADF","--bs-btn-color":"#fff","--bs-btn-hover-color":"#fff","--bs-btn-hover-bg":"#A7C4B5","--bs-btn-active-color":"#fff","--bs-btn-active-bg":"#A7C4B5"}},"1",-1),m=(0,l.Lk)("button",{type:"button",class:"position-absolute top-0 start-50 translate-middle btn btn-sm rounded-pill",style:{width:"2rem",height:"2rem","--bs-btn-bg":"#A7C4B5","--bs-btn-color":"#fff","--bs-btn-hover-color":"#fff","--bs-btn-hover-bg":"#A7C4B5","--bs-btn-active-color":"#fff","--bs-btn-active-bg":"#A7C4B5"}},"2",-1),u=(0,l.Lk)("button",{type:"button",class:"position-absolute top-0 start-100 translate-middle btn btn-sm rounded-pill",style:{width:"2rem",height:"2rem","--bs-btn-bg":"#D6EADF","--bs-btn-color":"#fff","--bs-btn-hover-color":"#fff","--bs-btn-hover-bg":"#A7C4B5","--bs-btn-active-color":"#fff","--bs-btn-active-bg":"#A7C4B5"}},"3",-1),f=(0,l.Fv)('<div class="row"><div class="col-md-8 col-10 mx-auto"><div class="position-relative m-2"><div class="position-absolute top-0 start-0 translate-middle d-inline mt-2 ms-4">購物車</div><div class="position-absolute top-0 start-50 translate-middle d-inline mt-2 ms-2">填寫資料</div><div class="position-absolute top-0 start-100 translate-middle d-inline mt-2" style="width:4rem;">訂單確認</div></div></div></div>',1),p={class:"col-md-7"},v=(0,l.Lk)("h6",{class:"bg-light p-3"},"訂購人資訊",-1),k={class:"border rounded mb-4 p-3"},h={class:"mb-3"},L=(0,l.Lk)("label",{for:"name",class:"form-label"},"訂購人姓名",-1),g={class:"mb-3"},y=(0,l.Lk)("label",{for:"tel",class:"form-label"},"訂購人電話",-1),C={class:"mb-3"},F=(0,l.Lk)("label",{for:"email",class:"form-label"},"訂購人信箱",-1),w={class:"mb-3"},V=(0,l.Lk)("label",{for:"address",class:"form-label"},"取貨地址",-1),A={class:"mb-4"},x=(0,l.Lk)("label",{for:"note",class:"form-label"},"訂單備註",-1),$={class:"col-md-5"},_=(0,l.Lk)("h6",{class:"bg-light p-3"},"取貨及付款資訊",-1),D={class:"border rounded mb-3 p-3"},T={class:"mb-4"},B=(0,l.Lk)("label",{for:"shipping",class:"mb-2"},"取貨方式",-1),U=(0,l.Lk)("option",{value:""},"請選擇取貨方式",-1),q=(0,l.Lk)("option",{value:"自取"},"自取",-1),E=(0,l.Lk)("option",{value:"外送"},"外送",-1),N={class:"mb-4"},O=(0,l.Lk)("label",{for:"pay",class:"mb-2"},"付款方式",-1),S=(0,l.Lk)("option",{value:""},"請選擇付款方式",-1),W=(0,l.Lk)("option",{value:"現金"},"現金",-1),j=(0,l.Lk)("option",{value:"信用卡"},"信用卡",-1),P=(0,l.Lk)("h6",{class:"bg-light p-3"},"訂單資訊",-1),X={class:"p-3 border rounded mb-3"},H={class:"w-100"},I={class:"mb-3"},J={class:"float-end"},K={key:0,class:"mb-4"},Q={class:"text-warning fw-bold"},z={class:"float-end"},G={class:"fw-bold border-top pt-2"},M={class:"float-end fw-bold"},R={class:"mb-4 d-flex align-items-center justify-content-between"};function Y(e,s,a,Y,Z,ee){const se=(0,l.g2)("ShopNavbar"),ae=(0,l.g2)("router-link"),le=(0,l.g2)("v-field"),te=(0,l.g2)("error-message"),oe=(0,l.g2)("v-form");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(se),(0,l.Lk)("div",r,[(0,l.Lk)("div",i,[(0,l.Lk)("div",n,[(0,l.Lk)("div",d,[c,(0,l.bF)(ae,{to:"/cart"},{default:(0,l.k6)((()=>[b])),_:1}),(0,l.bF)(ae,{to:"/checkout"},{default:(0,l.k6)((()=>[m])),_:1}),u])]),f]),(0,l.bF)(oe,{class:"row justify-content-around pt-4",onSubmit:ee.addOrder},{default:(0,l.k6)((({errors:a})=>[(0,l.Lk)("div",p,[v,(0,l.Lk)("div",k,[(0,l.Lk)("div",h,[L,(0,l.bF)(le,{type:"text",class:(0,t.C4)(["form-control",{"is-invalid":a["訂購人姓名"]}]),id:"name",name:"訂購人姓名",rules:"required",modelValue:Z.form.user.name,"onUpdate:modelValue":s[0]||(s[0]=e=>Z.form.user.name=e)},null,8,["modelValue","class"]),(0,l.bF)(te,{name:"訂購人姓名",class:"invalid-feedback"})]),(0,l.Lk)("div",g,[y,(0,l.bF)(le,{type:"text",class:(0,t.C4)(["form-control",{"is-invalid":a["tel"]}]),id:"tel",name:"tel",modelValue:Z.form.user.tel,"onUpdate:modelValue":s[1]||(s[1]=e=>Z.form.user.tel=e),rules:ee.isPhone},null,8,["modelValue","rules","class"]),(0,l.bF)(te,{name:"tel",class:"invalid-feedback"})]),(0,l.Lk)("div",C,[F,(0,l.bF)(le,{type:"email",class:(0,t.C4)(["form-control",{"is-invalid":a["訂購人信箱"]}]),id:"email",name:"訂購人信箱",rules:"email|required",modelValue:Z.form.user.email,"onUpdate:modelValue":s[2]||(s[2]=e=>Z.form.user.email=e)},null,8,["modelValue","class"]),(0,l.bF)(te,{name:"訂購人信箱",class:"invalid-feedback"})]),(0,l.Lk)("div",w,[V,(0,l.bF)(le,{type:"text",class:(0,t.C4)(["form-control",{"is-invalid":a["取貨地址"]}]),id:"address",name:"取貨地址",modelValue:Z.form.user.address,"onUpdate:modelValue":s[3]||(s[3]=e=>Z.form.user.address=e),rules:"required"},null,8,["modelValue","class"]),(0,l.bF)(te,{name:"取貨地址",class:"invalid-feedback"})]),(0,l.Lk)("div",A,[x,(0,l.bo)((0,l.Lk)("textarea",{class:"form-control",id:"note",rows:"3","onUpdate:modelValue":s[4]||(s[4]=e=>Z.form.message=e)},null,512),[[o.Jo,Z.form.message]])])])]),(0,l.Lk)("div",$,[_,(0,l.Lk)("div",D,[(0,l.Lk)("div",T,[B,(0,l.bF)(le,{class:(0,t.C4)(["form-select",{"is-invalid":a["取貨方式"]}]),id:"shipping",name:"取貨方式",modelValue:Z.form.shipping,"onUpdate:modelValue":s[5]||(s[5]=e=>Z.form.shipping=e),as:"select",rules:"required"},{default:(0,l.k6)((()=>[U,q,E])),_:2},1032,["modelValue","class"]),(0,l.bF)(te,{name:"取貨方式",class:"invalid-feedback"})]),(0,l.Lk)("div",N,[O,(0,l.bF)(le,{class:(0,t.C4)(["form-select",{"is-invalid":a["付款方式"]}]),"aria-label":"Default select example",id:"pay",name:"付款方式",modelValue:Z.form.pay,"onUpdate:modelValue":s[6]||(s[6]=e=>Z.form.pay=e),as:"select",rules:"required"},{default:(0,l.k6)((()=>[S,W,j])),_:2},1032,["modelValue","class"]),(0,l.bF)(te,{name:"付款方式",class:"invalid-feedback"})])]),P,(0,l.Lk)("div",X,[(0,l.Lk)("div",H,[(0,l.Lk)("p",I,[(0,l.eW)("合計 "),(0,l.Lk)("span",J,"NT$ "+(0,t.v_)(e.$filters.currency(this.total)),1)]),this.total!==this.finalTotal?((0,l.uX)(),(0,l.CE)("div",K,[(0,l.Lk)("p",Q,[(0,l.eW)("套用優惠代碼 "),(0,l.Lk)("span",z,"- "+(0,t.v_)(this.carts[0]?.coupon?.percent)+"%",1)])])):(0,l.Q3)("",!0),(0,l.Lk)("p",G,[(0,l.eW)("結帳總金額 "),(0,l.Lk)("span",M,"NT$ "+(0,t.v_)(e.$filters.currency(this.finalTotal)),1)])])]),(0,l.Lk)("div",R,[(0,l.Lk)("a",{href:"",class:"link text-secondary",onClick:s[7]||(s[7]=(0,o.D$)(((...e)=>ee.backToCart&&ee.backToCart(...e)),["prevent"]))},"← 返回購物車"),(0,l.Lk)("button",{class:"btn btn-warning",type:"submit",onClick:s[8]||(s[8]=(...e)=>ee.addOrder&&ee.addOrder(...e))},"送出訂單")])])])),_:1},8,["onSubmit"])])],64)}a(4114);var Z=a(3885),ee=a(7649),se=a(5234),ae={data(){return{form:{user:{name:"",tel:"",email:"",address:""},message:"",shipping:"",pay:""}}},components:{ShopNavbar:Z.A},computed:{...(0,se.aH)(ee.A,["total","finalTotal","carts"])},methods:{...(0,se.i0)(ee.A,["getCart"]),addOrder(){const e="https://vue3-course-api.hexschool.io/api/ecshop-api/order",s=this.form;this.isLoading=!0,this.$http.post(e,{data:s}).then((e=>{this.isLoading=!1,console.log(e),e.data.success&&this.$router.push(`/checkout/${e.data.orderId}`)}))},backToCart(){this.$router.push("/cart")},isPhone(e){const s=/^(09)[0-9]{8}$/;return!!s.test(e)||"須為正確的電話號碼"}},created(){this.getCart()}},le=a(1241);const te=(0,le.A)(ae,[["render",Y]]);var oe=te}}]);
//# sourceMappingURL=14.7a34999f.js.map