"use strict";(self["webpackChunkvue_ecshop"]=self["webpackChunkvue_ecshop"]||[]).push([[959],{3864:function(t,s,o){var a=o(4373),e=o(5234),i=o(4161),c=o(7649);const r=(0,i.A)(),n=(0,c.A)();s.A=(0,e.nY)("productState",{state:()=>({products:[],categories:{},pagination:{}}),getters:{},actions:{getAllProducts(){const t="https://vue3-course-api.hexschool.io/api/ecshop-api/products/all";r.isLoading=!0,a.A.get(t).then((t=>{r.isLoading=!1,console.log("getAllProducts",t.data),this.products=t.data.products;const s=this.products.map((t=>t.category)),o=s.filter(((t,o)=>s.indexOf(t)===o));this.categories=o}))},getProducts(t=1){const s=`https://vue3-course-api.hexschool.io/api/ecshop-api/products?page=${t}`;r.isLoading=!0,a.A.get(s).then((t=>{r.isLoading=!1,console.log("getProducts",t.data),this.products=t.data.products,this.pagination=t.data.pagination;const s=this.products.map((t=>t.category)),o=s.filter(((t,o)=>s.indexOf(t)===o));this.categories=o}))},addCart(t){const s="https://vue3-course-api.hexschool.io/api/ecshop-api/cart";r.cartLoadingItem=t;const o={product_id:t,qty:1};a.A.post(s,{data:o}).then((t=>{r.cartLoadingItem="",console.log("addCart",t),t.data.success&&n.getCart()}))}}})},2426:function(t,s,o){o.d(s,{A:function(){return u}});var a=o(6768);const e={class:"col-md-12 p-3 bg-light"},i=(0,a.Lk)("div",{class:"d-flex justify-content-center"},[(0,a.Lk)("div",{class:"text-warning fw-bold",href:"#"},"Hokii Poke"),(0,a.Lk)("div",{class:"fs-6 fw-light px-3"},"© 2024. All Rights Reserved.")],-1),c=(0,a.Lk)("div",{class:"mt-2 text-center fw-light"},[(0,a.Lk)("i",{class:"bi bi-person-gear me-1"}),(0,a.eW)("商店後台管理 ")],-1);function r(t,s){const o=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",e,[i,(0,a.bF)(o,{to:"/login",class:"text-decoration-none text-secondary"},{default:(0,a.k6)((()=>[c])),_:1})])}var n=o(1241);const d={},l=(0,n.A)(d,[["render",r]]);var u=l},3959:function(t,s,o){o.r(s),o.d(s,{default:function(){return X}});var a=o(6768),e=o(4232),i=o(5130);const c={class:"container"},r={"aria-label":"breadcrumb",class:"mb-4"},n={class:"breadcrumb mb-4"},d={class:"breadcrumb-item"},l={class:"breadcrumb-item","aria-current":"page"},u={class:"breadcrumb-item active fw-bold","aria-current":"page"},p={class:"row justify-content-center"},h={class:"col-md-5 col-11 mb-4",style:{"max-width":"500px"}},g=["src"],b={class:"col-md-4 col-11"},m={class:"mb-4"},k={class:"mb-4"},v=(0,a.Lk)("hr",null,null,-1),L=(0,a.Lk)("br",null,null,-1),f={class:"fs-5 mb-5"},y={class:"fs-6 mb-0 float-end"},x={class:"input-group mb-3"},A=(0,a.Lk)("span",{class:"input-group-text",id:"basic-addon2"},"份",-1),C=["disabled"],w={key:0,class:"spinner-border spinner-border-sm text-warning",role:"status"},_=(0,a.Lk)("span",{class:"visually-hidden"},"Loading...",-1),I=[_],F=(0,a.Lk)("i",{class:"bi bi-cart4"},null,-1);function $(t,s,o,_,$,P){const S=(0,a.g2)("ShopNavbar"),q=(0,a.g2)("LoadingOverlay"),N=(0,a.g2)("router-link"),j=(0,a.g2)("ShopFooter");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(S),(0,a.bF)(q,{active:$.isLoading},null,8,["active"]),(0,a.Lk)("div",c,[(0,a.Lk)("nav",r,[(0,a.Lk)("ol",n,[(0,a.Lk)("li",d,[(0,a.bF)(N,{class:"link-secondary",to:"/products"},{default:(0,a.k6)((()=>[(0,a.eW)("全部商品")])),_:1})]),(0,a.Lk)("li",l,(0,e.v_)($.product.category),1),(0,a.Lk)("li",u,(0,e.v_)($.product.title),1)])]),(0,a.Lk)("div",p,[(0,a.Lk)("div",h,[(0,a.Lk)("img",{src:$.product.imageUrl,alt:"productImg",style:{width:"100%",height:"100%"}},null,8,g)]),(0,a.Lk)("div",b,[(0,a.Lk)("h2",m,(0,e.v_)($.product.title),1),(0,a.Lk)("p",k,(0,e.v_)($.product.description),1),v,L,(0,a.Lk)("p",f,[(0,a.Lk)("strong",null,"NT$"+(0,e.v_)($.product.price),1),(0,a.Lk)("span",y,[(0,a.Lk)("del",null,"NT$"+(0,e.v_)($.product.origin_price),1)])]),(0,a.Lk)("div",x,[(0,a.bo)((0,a.Lk)("input",{type:"number",class:"form-control",placeholder:"1","onUpdate:modelValue":s[0]||(s[0]=t=>$.product.qty=t),min:"1","aria-describedby":"basic-addon2"},null,512),[[i.Jo,$.product.qty,void 0,{number:!0}]]),A]),(0,a.Lk)("button",{type:"button",class:"btn btn-outline-warning w-100",onClick:s[1]||(s[1]=t=>P.addCart($.product.id)),disabled:this.status.loadingItem===$.product.id},[this.status.loadingItem===$.product.id?((0,a.uX)(),(0,a.CE)("div",w,I)):(0,a.Q3)("",!0),F,(0,a.eW)(" 加入購物車 ")],8,C)])])]),(0,a.bF)(j)],64)}var P=o(6152),S=o(2426),q=o(7649),N=o(3864),j=o(5234),E={data(){return{product:{},isLoading:!1,id:"",status:{loadingItem:""}}},components:{ShopNavbar:P.A,ShopFooter:S.A},computed:{...(0,j.aH)(N.A,["products"])},inject:["emitter"],methods:{...(0,j.i0)(q.A,["getCart"]),getProduct(t){const s=`https://vue3-course-api.hexschool.io/api/ecshop-api/product/${t}`;this.isLoading=!0,this.$http.get(s).then((t=>{this.product=t.data.product,this.isLoading=!1,console.log(t)}))},addCart(t){const s="https://vue3-course-api.hexschool.io/api/ecshop-api/cart";this.status.loadingItem=t;const o={product_id:t,qty:1};this.$http.post(s,{data:o}).then((t=>{this.status.loadingItem="",this.$httpMsgState(t,"加入購物車"),console.log(t.data),this.getCart()}))}},created(){this.id=this.$route.params.productId,this.getProduct(this.id),this.getCart()}},O=o(1241);const W=(0,O.A)(E,[["render",$]]);var X=W}}]);
//# sourceMappingURL=959.d26f01e4.js.map