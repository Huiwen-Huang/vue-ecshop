"use strict";(self["webpackChunkvue_ecshop"]=self["webpackChunkvue_ecshop"]||[]).push([[406],{3864:function(t,e,a){var s=a(4373),o=a(5234),i=a(4161),r=a(7649);const c=(0,i.A)(),n=(0,r.A)();e.A=(0,o.nY)("productState",{state:()=>({products:[],categories:{},pagination:{}}),getters:{},actions:{getAllProducts(){const t="https://vue3-course-api.hexschool.io/api/ecshop-api/products/all";c.isLoading=!0,s.A.get(t).then((t=>{c.isLoading=!1,console.log("getAllProducts",t.data),this.products=t.data.products;const e=this.products.map((t=>t.category)),a=e.filter(((t,a)=>e.indexOf(t)===a));this.categories=a}))},getProducts(t=1){const e=`https://vue3-course-api.hexschool.io/api/ecshop-api/products?page=${t}`;c.isLoading=!0,s.A.get(e).then((t=>{c.isLoading=!1,console.log("getProducts",t.data),this.products=t.data.products,this.pagination=t.data.pagination;const e=this.products.map((t=>t.category)),a=e.filter(((t,a)=>e.indexOf(t)===a));this.categories=a}))},addCart(t){const e="https://vue3-course-api.hexschool.io/api/ecshop-api/cart";c.cartLoadingItem=t;const a={product_id:t,qty:1};s.A.post(e,{data:a}).then((t=>{c.cartLoadingItem="",console.log("addCart",t),t.data.success&&n.getCart()}))}}})},2426:function(t,e,a){a.d(e,{A:function(){return u}});var s=a(6768);const o={class:"col-md-12 p-3 bg-light"},i=(0,s.Lk)("div",{class:"d-flex justify-content-center"},[(0,s.Lk)("div",{class:"text-warning fw-bold",href:"#"},"Hokii Poke"),(0,s.Lk)("div",{class:"fs-6 fw-light px-3"},"© 2024. All Rights Reserved.")],-1),r=(0,s.Lk)("div",{class:"mt-2 text-center fw-light"},[(0,s.Lk)("i",{class:"bi bi-person-gear me-1"}),(0,s.eW)("商店後台管理 ")],-1);function c(t,e){const a=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",o,[i,(0,s.bF)(a,{to:"/login",class:"text-decoration-none text-secondary"},{default:(0,s.k6)((()=>[r])),_:1})])}var n=a(1241);const d={},l=(0,n.A)(d,[["render",c]]);var u=l},7264:function(t,e,a){a.r(e),a.d(e,{default:function(){return K}});var s=a(6768),o=a(4232),i=a(5130),r=a.p+"img/banner-3.fb395748.jpg";const c=(0,s.Lk)("div",{class:"container-fuild position-relative mb-4 animate__animated animate__fadeInUp"},[(0,s.Lk)("img",{src:r,class:"img-fuild opacity-50",style:{"max-width":"100%",height:"auto"},alt:""}),(0,s.Lk)("h1",{class:"text-center text-light fw-bold position-absolute translate-middle top-50 start-50"},"Eat Healthy, Eat Fresh")],-1),n={class:"container"},d={class:"row justify-content-center mt-4","data-aos":"fade-up","data-aos-delay":"200"},l={class:"col-md-9 col-10 mb-4"},u={class:"row justify-content-center"},g={class:"col-md-2 col-6"},p=["onClick"],h={class:"col-md-9 col-sm-12"},v={class:"row justify-content-center"},f=["onClick"],k={class:"card-body"},b={class:"card-title mb-4"},m={class:"card-text float-end"},C={class:"d-flex justify-content-center"},L=["disabled","onClick"],y={key:0,class:"spinner-border spinner-border-sm",role:"status"},w=(0,s.Lk)("span",{class:"visually-hidden"},"Loading...",-1),A=[w],x=(0,s.Lk)("i",{class:"bi bi-cart4"},null,-1);function _(t,e,a,r,w,_){const F=(0,s.g2)("ShopNavbar"),I=(0,s.g2)("LoadingOverlay"),P=(0,s.g2)("CartCanvas"),E=(0,s.g2)("ShopFooter");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(F),(0,s.bF)(I,{active:t.isLoading},null,8,["active"]),c,(0,s.Lk)("div",n,[(0,s.Lk)("div",d,[(0,s.Lk)("div",l,[(0,s.Lk)("div",u,[(0,s.Lk)("div",g,[(0,s.Lk)("button",{type:"button",class:(0,o.C4)(["btn btn-outline-warning fw-bold text-center mb-md-4 mb-2 w-100",{active:""===w.filterCategory}]),onClick:e[0]||(e[0]=(0,i.D$)((t=>w.filterCategory=""),["prevent"]))},"全部商品 ",2)]),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.categories,(t=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"col-md-2 col-6"},[(0,s.Lk)("button",{type:"button",class:(0,o.C4)(["btn btn-outline-warning text-center mb-md-4 mb-2 w-100",{active:w.filterCategory===t}]),onClick:(0,i.D$)((e=>w.filterCategory=t),["prevent"])},(0,o.v_)(t),11,p)])))),128))])]),(0,s.Lk)("div",h,[(0,s.Lk)("div",v,[(0,s.Lk)("div",null,(0,o.v_)(_.filterCategories.category),1),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(_.filterCategories,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"card mx-md-3 mb-4 shadow rounded p-0",style:{width:"18rem"}},[(0,s.Lk)("a",{href:"",onClick:(0,i.D$)((t=>_.getProduct(e.id)),["prevent"])},[(0,s.Lk)("div",{style:(0,o.Tr)([{height:"200px","background-size":"cover","background-position":"top"},{backgroundImage:`url(${e.imageUrl})`}])},null,4)],8,f),(0,s.Lk)("div",k,[(0,s.Lk)("h6",b,[(0,s.eW)((0,o.v_)(e.title)+" ",1),(0,s.Lk)("span",m,"NT$ "+(0,o.v_)(e.price),1)]),(0,s.Lk)("div",C,[(0,s.Lk)("button",{class:"btn btn-outline-warning w-100",disabled:t.cartLoadingItem===e.id,onClick:t=>_.addCart(e.id)},[t.cartLoadingItem===e.id?((0,s.uX)(),(0,s.CE)("div",y,A)):(0,s.Q3)("",!0),x,(0,s.eW)(" 加入購物車 ")],8,L)])])])))),128))])])]),(0,s.bF)(P,{ref:"canvas"},null,512)]),(0,s.bF)(E)],64)}a(4114);var F=a(6273),I=a(6152),P=a(2426),E=a(3864),$=a(4161),j=a(7649),X=a(5234),H={data(){return{filterCategory:""}},components:{ShopNavbar:I.A,ShopFooter:P.A,CartCanvas:F.A},inject:["emitter"],computed:{...(0,X.aH)(E.A,["products","categories"]),...(0,X.aH)($.A,["isLoading","cartLoadingItem"]),...(0,X.aH)(j.A,["carts"]),filterCategories(){let t=this.products;return this.filterCategory&&(t=t.filter((t=>t.category.toLowerCase().includes(this.filterCategory.toLowerCase())))),t.sort(((t,e)=>t.price-e.price))}},methods:{...(0,X.i0)(E.A,["getAllProducts"]),...(0,X.i0)(E.A,["getProducts"]),...(0,X.i0)(j.A,["getCart"]),getProduct(t){this.$router.push(`/product/${t}`)},addCart(t){const e="https://vue3-course-api.hexschool.io/api/ecshop-api/cart";this.cartLoadingItem=t;const a={product_id:t,qty:1};this.axios.post(e,{data:a}).then((t=>{this.cartLoadingItem="",console.log("addCart",t),t.data.success&&(this.getCart(),this.$refs.canvas.showCanvas())}))}},created(){this.getAllProducts(),this.getCart()}},S=a(1241);const D=(0,S.A)(H,[["render",_]]);var K=D}}]);
//# sourceMappingURL=406.56633343.js.map