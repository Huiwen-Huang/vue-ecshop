"use strict";(self["webpackChunkvue_ecshop"]=self["webpackChunkvue_ecshop"]||[]).push([[723],{4161:function(t,a,e){var s=e(5234);a.A=(0,s.nY)("statusState",{state:()=>({isLoading:!1,cartLoadingItem:""})})},4324:function(t,a,e){e.d(a,{A:function(){return b}});var s=e(6768),i=e(4232),n=e(5130);const o={class:"d-flex justify-content-center"},r={"aria-label":"Page navigation example"},c={class:"pagination"},d=(0,s.Lk)("span",{"aria-hidden":"true"},"«",-1),l=[d],u=["onClick"],p=(0,s.Lk)("span",{"aria-hidden":"true"},"»",-1),g=[p];function h(t,a,e,d,p,h){return(0,s.uX)(),(0,s.CE)("div",o,[(0,s.Lk)("nav",r,[(0,s.Lk)("ul",c,[(0,s.Lk)("li",{class:(0,i.C4)(["page-item text-warning",{disabled:!1===e.pages.has_pre}])},[(0,s.Lk)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:a[0]||(a[0]=(0,n.D$)((t=>h.updatePage(e.pages.current_page-1)),["prevent"]))},l)],2),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.pages.total_pages,(t=>((0,s.uX)(),(0,s.CE)("li",{class:(0,i.C4)(["page-item",{active:t===e.pages.current_page}]),key:t},[(0,s.Lk)("a",{class:"page-link",href:"#",onClick:(0,n.D$)((a=>h.updatePage(t)),["prevent"])},(0,i.v_)(t),9,u)],2)))),128)),(0,s.Lk)("li",{class:(0,i.C4)(["page-item",{disabled:!1===e.pages.has_next}])},[(0,s.Lk)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:a[1]||(a[1]=(0,n.D$)((t=>h.updatePage(e.pages.current_page+1)),["prevent"]))},g)],2)])])])}var k={props:["pages"],methods:{updatePage(t){this.$emit("emit-pages",t)}}},v=e(1241);const L=(0,v.A)(k,[["render",h]]);var b=L},9723:function(t,a,e){e.r(a),e.d(a,{default:function(){return I}});var s=e(6768),i=e(4232);const n={class:"container"},o={class:"row mt-4"},r={class:"col d-flex flex-wrap justify-content-center"},c={class:"card-body"},d={class:"card-title"},l={class:"card-text"},u={class:"d-flex justify-content-center"},p=["onClick"],g=["disabled","onClick"],h={key:0,class:"spinner-border spinner-border-sm",role:"status"},k=(0,s.Lk)("span",{class:"visually-hidden"},"Loading...",-1),v=[k],L=(0,s.Lk)("i",{class:"bi bi-cart4"},null,-1);function b(t,a,e,k,b,m){const C=(0,s.g2)("LoadingOverlay"),f=(0,s.g2)("PaginationCard");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(C,{active:t.isLoading},null,8,["active"]),(0,s.Lk)("div",n,[(0,s.Lk)("div",o,[(0,s.Lk)("div",r,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.sortProducts,(t=>((0,s.uX)(),(0,s.CE)("div",{key:t.id,class:"card mx-4 mb-4 shadow rounded",style:{width:"18rem"}},[(0,s.Lk)("div",{style:(0,i.Tr)([{height:"200px","background-size":"cover","background-position":"top"},{backgroundImage:`url(${t.imageUrl})`}])},null,4),(0,s.Lk)("div",c,[(0,s.Lk)("h5",d,(0,i.v_)(t.title),1),(0,s.Lk)("p",l,"NT$ "+(0,i.v_)(t.price),1),(0,s.Lk)("div",u,[(0,s.Lk)("button",{type:"button",class:"btn btn-outline-secondary me-2",onClick:a=>m.getProduct(t.id)},"查看更多",8,p),(0,s.Lk)("button",{class:"btn btn-outline-warning",disabled:this.status.loadingItem===t.id,onClick:a=>m.addCart(t.id)},[this.status.loadingItem===t.id?((0,s.uX)(),(0,s.CE)("div",h,v)):(0,s.Q3)("",!0),L,(0,s.eW)(" 加入購物車 ")],8,g)])])])))),128))])]),(0,s.bF)(f,{pages:t.pagination,onEmitPages:t.getProducts},null,8,["pages","onEmitPages"])])],64)}e(4114);var m=e(4324),C=e(4373),f=e(5234),P=e(4161);const y=(0,P.A)();var x=(0,f.nY)("productState",{state:()=>({products:[],pagination:{}}),getters:{sortProducts:t=>t.products.sort(((t,a)=>t.price-a.price))},actions:{getProducts(t=1){const a=`https://vue3-course-api.hexschool.io/api/ecshop-api/products/?page=${t}`;y.isLoading=!0,C.A.get(a).then((t=>{this.products=t.data.products,this.pagination=t.data.pagination,y.isLoading=!1,console.log(t.data)}))}}}),_={data(){return{status:{loadingItem:""}}},components:{PaginationCard:m.A},inject:["emitter"],computed:{...(0,f.aH)(x,["sortProducts","pagination"]),...(0,f.aH)(P.A,["isLoading"])},methods:{...(0,f.i0)(x,["getProducts"]),getProduct(t){this.$router.push(`/shop/product/${t}`)},addCart(t){const a="https://vue3-course-api.hexschool.io/api/ecshop-api/cart";this.status.loadingItem=t;const e={product_id:t,qty:1};this.$http.post(a,{data:e}).then((t=>{this.status.loadingItem="",this.$httpMsgState(t,"加入購物車"),console.log(t)}))}},created(){this.getProducts()}},$=e(1241);const E=(0,$.A)(_,[["render",b]]);var I=E}}]);
//# sourceMappingURL=723.6cf6db83.js.map