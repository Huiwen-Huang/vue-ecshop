"use strict";(self["webpackChunkvue_ecshop"]=self["webpackChunkvue_ecshop"]||[]).push([[85],{3864:function(a,t,e){var s=e(4373),i=e(5234),n=e(4161),o=e(7649);const r=(0,n.A)(),c=(0,o.A)();t.A=(0,i.nY)("productState",{state:()=>({products:[],pagination:{}}),getters:{sortProducts:a=>a.products.sort(((a,t)=>a.price-t.price))},actions:{getProducts(a=1){const t=`https://vue3-course-api.hexschool.io/api/ecshop-api/products/?page=${a}`;r.isLoading=!0,s.A.get(t).then((a=>{this.products=a.data.products,this.pagination=a.data.pagination,r.isLoading=!1,console.log("getProducts",a.data)}))},addCart(a){const t="https://vue3-course-api.hexschool.io/api/ecshop-api/cart";r.cartLoadingItem=a;const e={product_id:a,qty:1};s.A.post(t,{data:e}).then((a=>{r.cartLoadingItem="",console.log("addCart",a),a.data.success&&c.getCart()}))}}})},4324:function(a,t,e){e.d(t,{A:function(){return b}});var s=e(6768),i=e(4232),n=e(5130);const o={class:"d-flex justify-content-center"},r={"aria-label":"Page navigation example"},c={class:"pagination"},d=(0,s.Lk)("span",{"aria-hidden":"true"},"«",-1),l=[d],u=["onClick"],p=(0,s.Lk)("span",{"aria-hidden":"true"},"»",-1),g=[p];function k(a,t,e,d,p,k){return(0,s.uX)(),(0,s.CE)("div",o,[(0,s.Lk)("nav",r,[(0,s.Lk)("ul",c,[(0,s.Lk)("li",{class:(0,i.C4)(["page-item text-warning",{disabled:!1===e.pages.has_pre}])},[(0,s.Lk)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=(0,n.D$)((a=>k.updatePage(e.pages.current_page-1)),["prevent"]))},l)],2),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.pages.total_pages,(a=>((0,s.uX)(),(0,s.CE)("li",{class:(0,i.C4)(["page-item",{active:a===e.pages.current_page}]),key:a},[(0,s.Lk)("a",{class:"page-link",href:"#",onClick:(0,n.D$)((t=>k.updatePage(a)),["prevent"])},(0,i.v_)(a),9,u)],2)))),128)),(0,s.Lk)("li",{class:(0,i.C4)(["page-item",{disabled:!1===e.pages.has_next}])},[(0,s.Lk)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[1]||(t[1]=(0,n.D$)((a=>k.updatePage(e.pages.current_page+1)),["prevent"]))},g)],2)])])])}var h={props:["pages"],methods:{updatePage(a){this.$emit("emit-pages",a)}}},v=e(1241);const L=(0,v.A)(h,[["render",k]]);var b=L},5085:function(a,t,e){e.r(t),e.d(t,{default:function(){return $}});var s=e(6768),i=e(4232);const n={class:"container"},o={class:"row mt-4"},r={class:"col d-flex flex-wrap justify-content-center"},c={class:"card-body"},d={class:"card-title"},l={class:"card-text"},u={class:"d-flex justify-content-center"},p=["onClick"],g=["disabled","onClick"],k={key:0,class:"spinner-border spinner-border-sm",role:"status"},h=(0,s.Lk)("span",{class:"visually-hidden"},"Loading...",-1),v=[h],L=(0,s.Lk)("i",{class:"bi bi-cart4"},null,-1);function b(a,t,e,h,b,C){const m=(0,s.g2)("ShopNavbar"),f=(0,s.g2)("LoadingOverlay"),P=(0,s.g2)("PaginationCard");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(m),(0,s.bF)(f,{active:a.isLoading},null,8,["active"]),(0,s.Lk)("div",n,[(0,s.Lk)("div",o,[(0,s.Lk)("div",r,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.sortProducts,(t=>((0,s.uX)(),(0,s.CE)("div",{key:t.id,class:"card mx-4 mb-4 shadow rounded",style:{width:"18rem"}},[(0,s.Lk)("div",{style:(0,i.Tr)([{height:"200px","background-size":"cover","background-position":"top"},{backgroundImage:`url(${t.imageUrl})`}])},null,4),(0,s.Lk)("div",c,[(0,s.Lk)("h5",d,(0,i.v_)(t.title),1),(0,s.Lk)("p",l,"NT$ "+(0,i.v_)(t.price),1),(0,s.Lk)("div",u,[(0,s.Lk)("button",{type:"button",class:"btn btn-outline-secondary me-2",onClick:a=>C.getProduct(t.id)},"查看更多",8,p),(0,s.Lk)("button",{class:"btn btn-outline-warning",disabled:a.cartLoadingItem===t.id,onClick:e=>a.addCart(t.id)},[a.cartLoadingItem===t.id?((0,s.uX)(),(0,s.CE)("div",k,v)):(0,s.Q3)("",!0),L,(0,s.eW)(" 加入購物車 ")],8,g)])])])))),128))])]),(0,s.bF)(P,{pages:a.pagination,onEmitPages:a.getProducts},null,8,["pages","onEmitPages"])])],64)}e(4114);var C=e(7961),m=e(4324),f=e(3864),P=e(4161),A=e(7649),y=e(5234),x={components:{PaginationCard:m.A,ShopNavbar:C.A},inject:["emitter"],computed:{...(0,y.aH)(f.A,["sortProducts","pagination"]),...(0,y.aH)(P.A,["isLoading","cartLoadingItem"]),...(0,y.aH)(A.A,["carts"])},methods:{...(0,y.i0)(f.A,["getProducts"]),...(0,y.i0)(A.A,["getCart"]),getProduct(a){this.$router.push(`/product/${a}`)},...(0,y.i0)(f.A,["addCart"])},created(){this.getProducts(),this.getCart()}},_=e(1241);const E=(0,_.A)(x,[["render",b]]);var $=E}}]);
//# sourceMappingURL=85.02083eac.js.map