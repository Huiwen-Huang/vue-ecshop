{"version":3,"file":"js/1.1d1056ba.js","mappings":"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","sources":["webpack://vue-ecshop/./src/stores/productStore.js","webpack://vue-ecshop/./src/views/ShopProductsList.vue","webpack://vue-ecshop/./src/views/ShopProductsList.vue?6b07"],"sourcesContent":["import axios from 'axios'\nimport { defineStore } from 'pinia'\nimport statusStore from './statusStore'\nimport cartStore from './cartStore'\n\nconst status = statusStore()\nconst carts = cartStore()\n\nexport default defineStore('productState', {\n  state: () => {\n    return {\n      products: [],\n      categories: {},\n      pagination: {}\n    }\n  },\n  getters: {\n    // 商品以價格排序\n    // sortProducts: (state) =>\n    //   state.products.sort(\n    //     (a, b) => a.price - b.price\n    //   )\n  },\n  actions: {\n    // 取得產品列表_all\n    getAllProducts () {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`\n      status.isLoading = true\n      axios.get(api)\n        .then((res) => {\n          status.isLoading = false\n          console.log('getAllProducts', res.data)\n          this.products = res.data.products\n          // 分類項目\n          const unSort = this.products.map(item => {\n            return item.category\n          })\n          const sorted = unSort.filter((item, i) => {\n            return unSort.indexOf(item) === i\n          })\n          this.categories = sorted\n        })\n    },\n    // 取得產品列表_pagination\n    getProducts (page = 1) {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products?page=${page}`\n      status.isLoading = true\n      axios.get(api)\n        .then((res) => {\n          status.isLoading = false\n          console.log('getProducts', res.data)\n          this.products = res.data.products\n          this.pagination = res.data.pagination\n          // 分類項目\n          const unSort = this.products.map(item => {\n            return item.category\n          })\n          const sorted = unSort.filter((item, i) => {\n            return unSort.indexOf(item) === i\n          })\n          this.categories = sorted\n        })\n    },\n    // 加入購物車\n    addCart (id) {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\n      status.cartLoadingItem = id\n      // 需要帶入參數\n      const cart = {\n        product_id: id,\n        qty: 1\n      }\n      axios.post(api, { data: cart }) // 帶入參數的方式要留意\n        .then((res) => {\n          status.cartLoadingItem = ''\n          // this.$httpMsgState(res, '加入購物車')\n          // status.pushMsg({ title: '商品已加入購物車' })\n          console.log('addCart', res)\n          if (res.data.success) {\n            carts.getCart()\n          }\n        })\n    }\n  }\n})\n","<template>\n  <LoadingOverlay :active=\"isLoading\">\n    <div class=\"loadingio-spinner-ellipsis-nq4q5u6dq7r\"><div class=\"ldio-x2uulkbinbj\">\n    <div></div><div></div><div></div><div></div><div></div>\n    </div></div>\n  </LoadingOverlay>\n  <!-- banner -->\n  <div class=\"container-fuild position-relative mb-4 animate__animated animate__fadeInUp\">\n    <img src=\"../assets/images/banner-3.jpg\" class=\"img-fuild opacity-50\" style=\"max-width: 100%; height: auto;\" alt=\"\">\n    <h1 class=\"text-center text-light fw-bold position-absolute translate-middle top-50 start-50\">Eat Healthy, Eat Fresh</h1>\n  </div>\n  <div class=\"container\">\n    <div class=\"row justify-content-center mt-4\" data-aos=\"fade-up\" data-aos-delay=\"200\">\n      <!-- 分類選單 -->\n      <div class=\"col-md-9 col-10 mb-4\">\n        <div class=\"row justify-content-center\">\n          <div class=\"col-md-2 col-6\">\n            <button type=\"button\"\n            class=\"btn btn-outline-warning fw-bold text-center mb-md-4 mb-2 w-100\"\n            :class=\"{ 'active': filterCategory === '' }\"\n            @click.prevent=\"filterCategory = ''\">全部商品\n            </button>\n          </div>\n          <div v-for=\"category in categories\" :key=\"category\" class=\"col-md-2 col-6\">\n            <button type=\"button\"\n            class=\"btn btn-outline-warning text-center mb-md-4 mb-2 w-100\"\n            :class=\"{ 'active': filterCategory === category }\"\n            @click.prevent=\"filterCategory = category\">{{ category }}\n            <!-- <span class=\"badge bg-light rounded-pill ms-5\">{{ sortProducts.length }}</span> -->\n            </button>\n          </div>\n        </div>\n      </div>\n      <!-- 產品卡片 -->\n      <div class=\"col-md-9 col-sm-12\">\n        <div class=\"row justify-content-center\">\n          <div>{{ filterCategories.category }}</div>\n          <div v-for=\"item in filterCategories\" :key=\"item.id\" class=\"card mx-md-3 mb-4 shadow rounded p-0\" style=\"width: 18rem;\">\n              <a href=\"\" @click.prevent=\"getProduct(item.id)\">\n                <div style=\"height: 200px; background-size: cover; background-position: top\"\n                    :style=\"{backgroundImage: `url(${item.imageUrl})`}\">\n                </div>\n              </a>\n            <div class=\"card-body\">\n              <h6 class=\"card-title mb-4\">{{ item.title }}\n                <span class=\"card-text float-end\">NT$ {{ item.price }}</span>\n              </h6>\n              <div class=\"d-flex justify-content-center\">\n                <button class=\"btn btn-outline-warning w-100\"\n                        :disabled=\"cartLoadingItem === item.id\"\n                        @click=\"addCart(item.id)\">\n                  <div v-if=\"cartLoadingItem === item.id\" class=\"spinner-border spinner-border-sm\" role=\"status\">\n                    <span class=\"visually-hidden\">Loading...</span>\n                  </div>\n                  <i class=\"bi bi-cart4\"></i> 加入購物車\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- 頁籤 -->\n    <!-- <PaginationCard :pages=\"pagination\" @emit-pages=\"getProducts\"></PaginationCard> -->\n    <CartCanvas ref=\"canvas\"></CartCanvas>\n  </div>\n</template>\n\n<script>\nimport CartCanvas from '@/components/CartCanvas.vue'\n// import PaginationCard from '@/components/PaginationCard.vue'\nimport productStore from '@/stores/productStore'\nimport statusStore from '@/stores/statusStore'\nimport cartStore from '@/stores/cartStore'\nimport { mapState, mapActions } from 'pinia'\n\nexport default {\n  data () {\n    return {\n      filterCategory: ''\n    }\n  },\n  components: {\n    CartCanvas\n  },\n  inject: ['emitter'],\n  computed: {\n    ...mapState(productStore, ['products', 'categories']),\n    ...mapState(statusStore, ['isLoading', 'cartLoadingItem']),\n    ...mapState(cartStore, ['carts']),\n    // 篩選分類品項\n    filterCategories () {\n      let filterProducts = this.products\n      if (this.filterCategory) {\n        filterProducts = filterProducts.filter((item) => {\n          return item.category\n            .toLowerCase()\n            .includes(this.filterCategory.toLowerCase())\n        })\n      }\n      return filterProducts.sort(\n        (a, b) => a.price - b.price\n      )\n    }\n  },\n  methods: {\n    // 取得產品列表\n    ...mapActions(productStore, ['getAllProducts']),\n    ...mapActions(productStore, ['getProducts']),\n    // 取得購物車數量\n    ...mapActions(cartStore, ['getCart']),\n    // 進入單一商品介紹頁\n    getProduct (id) {\n      this.$router.push(`/shop/product/${id}`)\n    },\n    // 加入購物車\n    // ...mapActions(productStore, ['addCart'])\n    // 加入購物車+顯示側欄\n    addCart (id) {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\n      this.cartLoadingItem = id\n      // 需要帶入參數\n      const cart = {\n        product_id: id,\n        qty: 1\n      }\n      this.axios.post(api, { data: cart }) // 帶入參數的方式要留意\n        .then((res) => {\n          this.cartLoadingItem = ''\n          // this.$httpMsgState(res, '加入購物車')\n          // status.pushMsg({ title: '商品已加入購物車' })\n          console.log('addCart', res)\n          if (res.data.success) {\n            this.getCart()\n            this.$refs.canvas.showCanvas()\n          }\n        })\n    }\n  },\n  created () {\n    this.getAllProducts()\n    this.getCart()\n  }\n}\n</script>\n","import { render } from \"./ShopProductsList.vue?vue&type=template&id=563e914f\"\nimport script from \"./ShopProductsList.vue?vue&type=script&lang=js\"\nexport * from \"./ShopProductsList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["status","statusStore","carts","cartStore","defineStore","state","products","categories","pagination","getters","actions","getAllProducts","api","isLoading","axios","get","then","res","console","log","data","this","unSort","map","item","category","sorted","filter","i","indexOf","getProducts","page","addCart","id","cartLoadingItem","cart","product_id","qty","post","success","getCart","_createElementVNode","class","src","_imports_0","style","alt","key","role","_hoisted_18","_createElementBlock","_Fragment","_createVNode","_component_LoadingOverlay","active","_ctx","default","_withCtx","_hoisted_1","_","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","type","_normalizeClass","$data","filterCategory","onClick","_cache","_withModifiers","$event","_renderList","_hoisted_8","_hoisted_9","_hoisted_10","_toDisplayString","$options","filterCategories","href","getProduct","_normalizeStyle","backgroundImage","imageUrl","_hoisted_11","_hoisted_12","_hoisted_13","_createTextVNode","title","_hoisted_14","price","_hoisted_15","disabled","_hoisted_17","_hoisted_19","_createCommentVNode","_hoisted_20","_hoisted_16","_component_CartCanvas","ref","components","CartCanvas","inject","computed","mapState","productStore","filterProducts","toLowerCase","includes","sort","a","b","methods","mapActions","$router","push","$refs","canvas","showCanvas","created","__exports__","render"],"sourceRoot":""}