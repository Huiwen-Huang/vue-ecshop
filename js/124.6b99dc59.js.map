{"version":3,"file":"js/124.6b99dc59.js","mappings":"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","sources":["webpack://vue-ecshop/./src/views/ShopProductsList.vue","webpack://vue-ecshop/./src/stores/productStore.js","webpack://vue-ecshop/./src/views/ShopProductsList.vue?6b07"],"sourcesContent":["<template>\n  <ShopNavbar></ShopNavbar>\n  <LoadingOverlay :active=\"isLoading\"></LoadingOverlay>\n  <div class=\"container\">\n    <div class=\"row mt-4\">\n      <!-- 分類選單 -->\n      <div class=\"col-md-2\">\n        <div class=\"row\">\n          <div class=\"col-lg-12 col-md-3 col-6\">\n            <button type=\"button\"\n            class=\"btn btn-outline-warning fw-bold text-center mb-4 w-100\"\n            :class=\"{ 'active': filterCategory === '' }\"\n            @click.prevent=\"filterCategory = ''\">全部商品\n            </button>\n          </div>\n          <div v-for=\"category in categories\" :key=\"category\" class=\"col-lg-12 col-md-3 col-6\">\n            <button type=\"button\"\n            class=\"btn btn-outline-warning fw-bold text-center mb-4 w-100\"\n            :class=\"{ 'active': filterCategory === category }\"\n            @click.prevent=\"filterCategory = category\">{{ category }}\n            <!-- <span class=\"badge bg-light rounded-pill ms-5\">{{ sortProducts.length }}</span> -->\n            </button>\n          </div>\n        </div>\n      </div>\n      <!-- 產品卡片 -->\n      <div class=\"col-md-9 col-11 ms-auto\">\n        <div class=\"row\">\n          <div>{{ filterCategories.category }}</div>\n          <div v-for=\"item in filterCategories\" :key=\"item.id\" class=\"card mx-3 mb-4 shadow rounded p-0\" style=\"width: 18rem;\">\n              <a href=\"\" @click.prevent=\"getProduct(item.id)\">\n                <div style=\"height: 200px; background-size: cover; background-position: top\"\n                    :style=\"{backgroundImage: `url(${item.imageUrl})`}\">\n                </div>\n              </a>\n            <div class=\"card-body\">\n              <h6 class=\"card-title mb-4\">{{ item.title }}\n                <span class=\"card-text float-end\">NT$ {{ item.price }}</span>\n              </h6>\n              <div class=\"d-flex justify-content-center\">\n                <button class=\"btn btn-outline-warning w-100\"\n                        :disabled=\"cartLoadingItem === item.id\"\n                        @click=\"addCart(item.id)\">\n                  <div v-if=\"cartLoadingItem === item.id\" class=\"spinner-border spinner-border-sm\" role=\"status\">\n                    <span class=\"visually-hidden\">Loading...</span>\n                  </div>\n                  <i class=\"bi bi-cart4\"></i> 加入購物車\n                </button>\n              </div>\n            </div>\n            </div>\n        </div>\n      </div>\n    </div>\n    <!-- 頁籤 -->\n    <!-- <PaginationCard :pages=\"pagination\" @emit-pages=\"getProducts\"></PaginationCard> -->\n  </div>\n</template>\n\n<script>\nimport ShopNavbar from '@/components/ShopNavbar.vue'\n// import PaginationCard from '@/components/PaginationCard.vue'\nimport productStore from '@/stores/productStore'\nimport statusStore from '@/stores/statusStore'\nimport cartStore from '@/stores/cartStore'\nimport { mapState, mapActions } from 'pinia'\n\nexport default {\n  data () {\n    return {\n      filterCategory: ''\n    }\n  },\n  components: {\n    ShopNavbar\n  },\n  inject: ['emitter'],\n  computed: {\n    ...mapState(productStore, ['products', 'categories']),\n    ...mapState(statusStore, ['isLoading', 'cartLoadingItem']),\n    ...mapState(cartStore, ['carts']),\n    // 篩選分類品項\n    filterCategories () {\n      let filterProducts = this.products\n      if (this.filterCategory) {\n        filterProducts = filterProducts.filter((item) => {\n          return item.category\n            .toLowerCase()\n            .includes(this.filterCategory.toLowerCase())\n        })\n      }\n      return filterProducts.sort(\n        (a, b) => a.price - b.price\n      )\n    }\n  },\n  methods: {\n    // 取得產品列表\n    ...mapActions(productStore, ['getAllProducts']),\n    ...mapActions(productStore, ['getProducts']),\n    // 取得購物車數量\n    ...mapActions(cartStore, ['getCart']),\n    // 進入單一商品介紹頁\n    getProduct (id) {\n      this.$router.push(`/product/${id}`)\n    },\n    // 加入購物車\n    ...mapActions(productStore, ['addCart'])\n  },\n  created () {\n    this.getAllProducts()\n    this.getCart()\n  }\n}\n</script>\n","import axios from 'axios'\nimport { defineStore } from 'pinia'\nimport statusStore from './statusStore'\nimport cartStore from './cartStore'\n\nconst status = statusStore()\nconst carts = cartStore()\n\nexport default defineStore('productState', {\n  state: () => {\n    return {\n      products: [],\n      categories: {},\n      pagination: {}\n    }\n  },\n  getters: {\n    // 商品以價格排序\n    // sortProducts: (state) =>\n    //   state.products.sort(\n    //     (a, b) => a.price - b.price\n    //   )\n  },\n  actions: {\n    // 取得產品列表_all\n    getAllProducts () {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`\n      status.isLoading = true\n      axios.get(api)\n        .then((res) => {\n          status.isLoading = false\n          console.log('getAllProducts', res.data)\n          this.products = res.data.products\n          // 分類項目\n          const unSort = this.products.map(item => {\n            return item.category\n          })\n          const sorted = unSort.filter((item, i) => {\n            return unSort.indexOf(item) === i\n          })\n          this.categories = sorted\n        })\n    },\n    // 取得產品列表_pagination\n    getProducts (page = 1) {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products?page=${page}`\n      status.isLoading = true\n      axios.get(api)\n        .then((res) => {\n          status.isLoading = false\n          console.log('getProducts', res.data)\n          this.products = res.data.products\n          this.pagination = res.data.pagination\n          // 分類項目\n          const unSort = this.products.map(item => {\n            return item.category\n          })\n          const sorted = unSort.filter((item, i) => {\n            return unSort.indexOf(item) === i\n          })\n          this.categories = sorted\n        })\n    },\n    // 加入購物車\n    addCart (id) {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\n      status.cartLoadingItem = id\n      // 需要帶入參數\n      const cart = {\n        product_id: id,\n        qty: 1\n      }\n      axios.post(api, { data: cart }) // 帶入參數的方式要留意\n        .then((res) => {\n          status.cartLoadingItem = ''\n          // this.$httpMsgState(res, '加入購物車')\n          // status.pushMsg({ title: '商品已加入購物車' })\n          console.log('addCart', res)\n          if (res.data.success) {\n            carts.getCart()\n          }\n        })\n    }\n  }\n})\n","import { render } from \"./ShopProductsList.vue?vue&type=template&id=474bf466\"\nimport script from \"./ShopProductsList.vue?vue&type=script&lang=js\"\nexport * from \"./ShopProductsList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","key","role","_createElementVNode","_hoisted_16","_createElementBlock","_Fragment","_createVNode","_component_ShopNavbar","_component_LoadingOverlay","active","_ctx","isLoading","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","type","_normalizeClass","$data","filterCategory","onClick","_cache","_withModifiers","$event","_renderList","categories","category","_hoisted_6","_hoisted_7","_hoisted_8","_toDisplayString","$options","filterCategories","item","id","style","href","getProduct","_normalizeStyle","backgroundImage","imageUrl","_hoisted_9","_hoisted_10","_hoisted_11","_createTextVNode","title","_hoisted_12","price","_hoisted_13","disabled","cartLoadingItem","addCart","_hoisted_15","_hoisted_17","_createCommentVNode","_hoisted_18","_hoisted_14","status","statusStore","carts","cartStore","defineStore","state","products","pagination","getters","actions","getAllProducts","api","axios","get","then","res","console","log","data","this","unSort","map","sorted","filter","i","indexOf","getProducts","page","cart","product_id","qty","post","success","getCart","components","ShopNavbar","inject","computed","mapState","productStore","filterProducts","toLowerCase","includes","sort","a","b","methods","mapActions","$router","push","created","__exports__","render"],"sourceRoot":""}