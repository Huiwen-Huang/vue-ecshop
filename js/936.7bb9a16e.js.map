{"version":3,"file":"js/936.7bb9a16e.js","mappings":"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","sources":["webpack://vue-ecshop/./src/stores/cartStore.js","webpack://vue-ecshop/./src/stores/productStore.js","webpack://vue-ecshop/./src/stores/statusStore.js","webpack://vue-ecshop/./src/components/PaginationCard.vue","webpack://vue-ecshop/./src/components/PaginationCard.vue?24c6","webpack://vue-ecshop/./src/views/ShopProductsAll.vue","webpack://vue-ecshop/./src/views/ShopProductsAll.vue?1f48"],"sourcesContent":["import axios from 'axios'\nimport { defineStore } from 'pinia'\nimport statusStore from './statusStore'\n\nconst status = statusStore()\n\nexport default defineStore('cartState', {\n  state: () => {\n    return {\n      carts: [],\n      total: '',\n      finalTotal: ''\n    }\n  },\n  actions: {\n    // 取購物車列表\n    getCart () {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\n      status.isLoading = true\n      axios.get(api)\n        .then((res) => {\n          status.isLoading = false\n          console.log('getCart', res)\n          if (res.data.success) {\n            this.carts = res.data.data.carts\n            this.total = res.data.data.total\n            this.finalTotal = res.data.data.final_total\n          }\n        })\n    },\n    // 更新購物車價格\n    updateCart (item) {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`\n      const cart = {\n        product_id: item.product_id,\n        qty: item.qty\n      }\n      status.isLoading = true\n      status.cartLoadingItem = item.id\n      axios.put(api, { data: cart })\n        .then(res => {\n          console.log('updateCart', res)\n          status.isLoading = false\n          status.cartLoadingItem = ''\n          this.getCart()\n        })\n    }\n  }\n})\n","import axios from 'axios'\nimport { defineStore } from 'pinia'\nimport statusStore from './statusStore'\nimport cartStore from './cartStore'\n\nconst status = statusStore()\nconst carts = cartStore()\n\nexport default defineStore('productState', {\n  state: () => {\n    return {\n      products: [],\n      pagination: {}\n    }\n  },\n  getters: {\n    // 商品以價格排序\n    sortProducts: (state) =>\n      state.products.sort(\n        (a, b) => a.price - b.price\n      )\n  },\n  actions: {\n    // 取得產品列表\n    getProducts (page = 1) {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/?page=${page}`\n      status.isLoading = true\n      axios.get(api)\n        .then((res) => {\n          this.products = res.data.products\n          this.pagination = res.data.pagination\n          status.isLoading = false\n          console.log('getProducts', res.data)\n        })\n    },\n    // 加入購物車\n    addCart (id) {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\n      status.cartLoadingItem = id\n      // 需要帶入參數\n      const cart = {\n        product_id: id,\n        qty: 1\n      }\n      axios.post(api, { data: cart }) // 帶入參數的方式要留意\n        .then((res) => {\n          status.cartLoadingItem = ''\n          // this.$httpMsgState(res, '加入購物車')\n          console.log('addCart', res)\n          if (res.data.success) {\n            carts.getCart()\n          }\n        })\n    }\n  }\n})\n","import { defineStore } from 'pinia'\n\nexport default defineStore('statusState', {\n  state: () => {\n    return {\n      isLoading: false,\n      cartLoadingItem: ''\n    }\n  }\n})\n","<template>\n<div class=\"d-flex justify-content-center\">\n  <nav aria-label=\"Page navigation example\">\n    <ul class=\"pagination\">\n      <li class=\"page-item text-warning\" :class=\"{ 'disabled': pages.has_pre === false}\">\n        <a class=\"page-link\" href=\"#\" aria-label=\"Previous\" @click.prevent=\"updatePage(pages.current_page-1)\">\n          <span aria-hidden=\"true\">&laquo;</span>\n        </a>\n      </li>\n      <li class=\"page-item\" v-for=\"page in pages.total_pages\" :key=\"page\" :class=\"{ 'active': page === pages.current_page}\">\n        <a class=\"page-link\" href=\"#\" @click.prevent=\"updatePage(page)\">{{ page }}</a></li>\n      <li class=\"page-item\" :class=\"{ 'disabled': pages.has_next === false}\">\n        <a class=\"page-link\" href=\"#\" aria-label=\"Next\" @click.prevent=\"updatePage(pages.current_page+1)\">\n          <span aria-hidden=\"true\">&raquo;</span>\n        </a>\n      </li>\n    </ul>\n  </nav>\n</div>\n</template>\n\n<script>\nexport default {\n  props: ['pages'],\n  methods: {\n    updatePage (page) {\n      this.$emit('emit-pages', page)\n    }\n  }\n}\n</script>\n","import { render } from \"./PaginationCard.vue?vue&type=template&id=30728a4c\"\nimport script from \"./PaginationCard.vue?vue&type=script&lang=js\"\nexport * from \"./PaginationCard.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <LoadingOverlay :active=\"isLoading\"></LoadingOverlay>\n  <!-- 產品卡片 -->\n  <div class=\"col d-flex flex-wrap justify-content-center\">\n    <template v-for=\"item in sortProducts\" :key=\"item.id\">\n      <div class=\"card mx-4 mb-4 shadow rounded\" style=\"width: 18rem;\">\n      <div style=\"height: 200px; background-size: cover; background-position: top\"\n              :style=\"{backgroundImage: `url(${item.imageUrl})`}\"></div>\n      <div class=\"card-body\">\n        <h5 class=\"card-title\">{{ item.title }}</h5>\n        <p class=\"card-text\">NT$ {{ item.price }}</p>\n        <div class=\"d-flex justify-content-center\">\n          <button type=\"button\" class=\"btn btn-outline-secondary me-2\" @click=\"getProduct(item.id)\">查看更多</button>\n          <button class=\"btn btn-outline-warning\"\n                  :disabled=\"cartLoadingItem === item.id\"\n                  @click=\"addCart(item.id)\">\n            <div v-if=\"cartLoadingItem === item.id\" class=\"spinner-border spinner-border-sm\" role=\"status\">\n              <span class=\"visually-hidden\">Loading...</span>\n            </div>\n            <i class=\"bi bi-cart4\"></i> 加入購物車\n          </button>\n        </div>\n      </div>\n      </div>\n    </template>\n  </div>\n  <div class=\"container\">\n    <!-- 頁籤 -->\n    <PaginationCard :pages=\"pagination\" @emit-pages=\"getProducts\"></PaginationCard>\n  </div>\n</template>\n\n<script>\nimport PaginationCard from '@/components/PaginationCard.vue'\nimport productStore from '@/stores/productStore'\nimport statusStore from '@/stores/statusStore'\nimport cartStore from '@/stores/cartStore'\nimport { mapState, mapActions } from 'pinia'\n\nexport default {\n  components: {\n    PaginationCard\n  },\n  inject: ['emitter'],\n  computed: {\n    ...mapState(productStore, ['sortProducts', 'pagination']),\n    ...mapState(statusStore, ['isLoading', 'cartLoadingItem']),\n    ...mapState(cartStore, ['carts'])\n  },\n  methods: {\n    // 取得產品列表、加入購物車\n    ...mapActions(productStore, ['getProducts']),\n    // 取得購物車數量\n    ...mapActions(cartStore, ['getCart']),\n    // 進入單一商品介紹頁\n    getProduct (id) {\n      this.$router.push(`/product/${id}`)\n    },\n    // 加入購物車\n    ...mapActions(productStore, ['addCart'])\n  },\n  created () {\n    this.getProducts()\n    this.getCart()\n  }\n}\n</script>\n","import { render } from \"./ShopProductsAll.vue?vue&type=template&id=5d75d421\"\nimport script from \"./ShopProductsAll.vue?vue&type=script&lang=js\"\nexport * from \"./ShopProductsAll.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["status","statusStore","defineStore","state","carts","total","finalTotal","actions","getCart","api","isLoading","axios","get","then","res","console","log","data","success","this","final_total","updateCart","item","id","cart","product_id","qty","cartLoadingItem","put","cartStore","products","pagination","getters","sortProducts","sort","a","b","price","getProducts","page","addCart","post","class","_createElementVNode","_hoisted_4","_hoisted_7","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_normalizeClass","$props","pages","has_pre","href","onClick","_cache","_withModifiers","$event","$options","updatePage","current_page","_hoisted_5","_Fragment","_renderList","total_pages","key","_hoisted_6","has_next","_hoisted_8","props","methods","$emit","__exports__","render","role","_hoisted_9","_createVNode","_component_LoadingOverlay","active","_ctx","style","_normalizeStyle","backgroundImage","imageUrl","_toDisplayString","title","type","getProduct","disabled","_hoisted_10","_createCommentVNode","_hoisted_11","_createTextVNode","_hoisted_12","_component_PaginationCard","onEmitPages","components","PaginationCard","inject","computed","mapState","productStore","mapActions","$router","push","created"],"sourceRoot":""}