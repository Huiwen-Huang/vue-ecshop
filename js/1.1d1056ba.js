"use strict";(self["webpackChunkvue_ecshop"]=self["webpackChunkvue_ecshop"]||[]).push([[1],{3864:function(t,e,a){var s=a(4373),i=a(5234),o=a(4161),c=a(7649);const r=(0,o.A)(),n=(0,c.A)();e.A=(0,i.nY)("productState",{state:()=>({products:[],categories:{},pagination:{}}),getters:{},actions:{getAllProducts(){const t="https://vue3-course-api.hexschool.io/api/ecshop-api/products/all";r.isLoading=!0,s.A.get(t).then((t=>{r.isLoading=!1,console.log("getAllProducts",t.data),this.products=t.data.products;const e=this.products.map((t=>t.category)),a=e.filter(((t,a)=>e.indexOf(t)===a));this.categories=a}))},getProducts(t=1){const e=`https://vue3-course-api.hexschool.io/api/ecshop-api/products?page=${t}`;r.isLoading=!0,s.A.get(e).then((t=>{r.isLoading=!1,console.log("getProducts",t.data),this.products=t.data.products,this.pagination=t.data.pagination;const e=this.products.map((t=>t.category)),a=e.filter(((t,a)=>e.indexOf(t)===a));this.categories=a}))},addCart(t){const e="https://vue3-course-api.hexschool.io/api/ecshop-api/cart";r.cartLoadingItem=t;const a={product_id:t,qty:1};s.A.post(e,{data:a}).then((t=>{r.cartLoadingItem="",console.log("addCart",t),t.data.success&&n.getCart()}))}}})},3865:function(t,e,a){a.r(e),a.d(e,{default:function(){return D}});var s=a(6768),i=a(4232),o=a(5130),c=a.p+"img/banner-3.fb395748.jpg";const r=(0,s.Lk)("div",{class:"loadingio-spinner-ellipsis-nq4q5u6dq7r"},[(0,s.Lk)("div",{class:"ldio-x2uulkbinbj"},[(0,s.Lk)("div"),(0,s.Lk)("div"),(0,s.Lk)("div"),(0,s.Lk)("div"),(0,s.Lk)("div")])],-1),n=(0,s.Lk)("div",{class:"container-fuild position-relative mb-4 animate__animated animate__fadeInUp"},[(0,s.Lk)("img",{src:c,class:"img-fuild opacity-50",style:{"max-width":"100%",height:"auto"},alt:""}),(0,s.Lk)("h1",{class:"text-center text-light fw-bold position-absolute translate-middle top-50 start-50"},"Eat Healthy, Eat Fresh")],-1),d={class:"container"},l={class:"row justify-content-center mt-4","data-aos":"fade-up","data-aos-delay":"200"},u={class:"col-md-9 col-10 mb-4"},p={class:"row justify-content-center"},g={class:"col-md-2 col-6"},h=["onClick"],v={class:"col-md-9 col-sm-12"},k={class:"row justify-content-center"},L=["onClick"],m={class:"card-body"},C={class:"card-title mb-4"},b={class:"card-text float-end"},f={class:"d-flex justify-content-center"},y=["disabled","onClick"],w={key:0,class:"spinner-border spinner-border-sm",role:"status"},A=(0,s.Lk)("span",{class:"visually-hidden"},"Loading...",-1),x=[A],_=(0,s.Lk)("i",{class:"bi bi-cart4"},null,-1);function I(t,e,a,c,A,I){const P=(0,s.g2)("LoadingOverlay"),$=(0,s.g2)("CartCanvas");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(P,{active:t.isLoading},{default:(0,s.k6)((()=>[r])),_:1},8,["active"]),n,(0,s.Lk)("div",d,[(0,s.Lk)("div",l,[(0,s.Lk)("div",u,[(0,s.Lk)("div",p,[(0,s.Lk)("div",g,[(0,s.Lk)("button",{type:"button",class:(0,i.C4)(["btn btn-outline-warning fw-bold text-center mb-md-4 mb-2 w-100",{active:""===A.filterCategory}]),onClick:e[0]||(e[0]=(0,o.D$)((t=>A.filterCategory=""),["prevent"]))},"全部商品 ",2)]),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.categories,(t=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"col-md-2 col-6"},[(0,s.Lk)("button",{type:"button",class:(0,i.C4)(["btn btn-outline-warning text-center mb-md-4 mb-2 w-100",{active:A.filterCategory===t}]),onClick:(0,o.D$)((e=>A.filterCategory=t),["prevent"])},(0,i.v_)(t),11,h)])))),128))])]),(0,s.Lk)("div",v,[(0,s.Lk)("div",k,[(0,s.Lk)("div",null,(0,i.v_)(I.filterCategories.category),1),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(I.filterCategories,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"card mx-md-3 mb-4 shadow rounded p-0",style:{width:"18rem"}},[(0,s.Lk)("a",{href:"",onClick:(0,o.D$)((t=>I.getProduct(e.id)),["prevent"])},[(0,s.Lk)("div",{style:(0,i.Tr)([{height:"200px","background-size":"cover","background-position":"top"},{backgroundImage:`url(${e.imageUrl})`}])},null,4)],8,L),(0,s.Lk)("div",m,[(0,s.Lk)("h6",C,[(0,s.eW)((0,i.v_)(e.title)+" ",1),(0,s.Lk)("span",b,"NT$ "+(0,i.v_)(e.price),1)]),(0,s.Lk)("div",f,[(0,s.Lk)("button",{class:"btn btn-outline-warning w-100",disabled:t.cartLoadingItem===e.id,onClick:t=>I.addCart(e.id)},[t.cartLoadingItem===e.id?((0,s.uX)(),(0,s.CE)("div",w,x)):(0,s.Q3)("",!0),_,(0,s.eW)(" 加入購物車 ")],8,y)])])])))),128))])])]),(0,s.bF)($,{ref:"canvas"},null,512)])],64)}a(4114);var P=a(4794),$=a(3864),E=a(4161),j=a(7649),F=a(5234),X={data(){return{filterCategory:""}},components:{CartCanvas:P.A},inject:["emitter"],computed:{...(0,F.aH)($.A,["products","categories"]),...(0,F.aH)(E.A,["isLoading","cartLoadingItem"]),...(0,F.aH)(j.A,["carts"]),filterCategories(){let t=this.products;return this.filterCategory&&(t=t.filter((t=>t.category.toLowerCase().includes(this.filterCategory.toLowerCase())))),t.sort(((t,e)=>t.price-e.price))}},methods:{...(0,F.i0)($.A,["getAllProducts"]),...(0,F.i0)($.A,["getProducts"]),...(0,F.i0)(j.A,["getCart"]),getProduct(t){this.$router.push(`/shop/product/${t}`)},addCart(t){const e="https://vue3-course-api.hexschool.io/api/ecshop-api/cart";this.cartLoadingItem=t;const a={product_id:t,qty:1};this.axios.post(e,{data:a}).then((t=>{this.cartLoadingItem="",console.log("addCart",t),t.data.success&&(this.getCart(),this.$refs.canvas.showCanvas())}))}},created(){this.getAllProducts(),this.getCart()}},q=a(1241);const H=(0,q.A)(X,[["render",I]]);var D=H}}]);
//# sourceMappingURL=1.1d1056ba.js.map